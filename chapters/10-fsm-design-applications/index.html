
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Applying FSM theory to practical design problems from specification to implementation">
      
      
        <meta name="author" content="Dan McCreary">
      
      
        <link rel="canonical" href="https://dmccreary.github.io/digital-electronics/chapters/10-fsm-design-applications/">
      
      
        <link rel="prev" href="../09-fsm-fundamentals/references/">
      
      
        <link rel="next" href="quiz/">
      
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.43">
    
    
      
        <title>FSM Design and Applications - Digital Electronics</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-E7S8QWP8T0"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-E7S8QWP8T0",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-E7S8QWP8T0",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="maroon" data-md-color-accent="gold">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fsm-design-and-applications" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Digital Electronics" class="md-header__button md-logo" aria-label="Digital Electronics" data-md-component="logo">
      
  <img src="../../img/logo.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Digital Electronics
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              FSM Design and Applications
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dmccreary/digital-electronics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub Repo
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Digital Electronics" class="md-nav__button md-logo" aria-label="Digital Electronics" data-md-component="logo">
      
  <img src="../../img/logo.jpg" alt="logo">

    </a>
    Digital Electronics
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dmccreary/digital-electronics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub Repo
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course-description/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Course Description
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Chapters
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Chapters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../01-number-systems-binary-arithmetic/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    1. Number Systems
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../02-boolean-algebra-fundamentals/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    2. Boolean Algebra
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../03-logic-gates-digital-signals/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    3. Logic Gates
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../04-combinational-logic-design/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    4. Combinational Design
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../05-logic-minimization-kmaps/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    5. K-Maps
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../06-combinational-building-blocks/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    6. Building Blocks
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../07-intro-sequential-logic/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    7. Sequential Logic
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../08-flip-flops-timing/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    8. Flip-Flops
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../09-fsm-fundamentals/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    9. FSM Fundamentals
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_11" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  <span class="md-ellipsis">
    10. FSM Applications
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_4_11" id="__nav_4_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_11_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_11">
            <span class="md-nav__icon md-icon"></span>
            10. FSM Applications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="quiz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quiz
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotated References
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../11-registers-counters-datapath/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    11. Registers & Counters
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../12-verilog-hdl-fundamentals/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    12. Verilog Basics
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../13-verilog-modeling/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    13. Verilog Modeling
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../14-testbenches-simulation/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    14. Testbenches
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../15-fpga-lab-skills/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    15. FPGA & Lab
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../lessons/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Lessons
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../sims/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Sims
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../learning-graph/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Learning Graph
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../prompts/equation-standards/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Prompts
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-we-built-this-site/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How we built this site
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concepts-covered" class="md-nav__link">
    <span class="md-ellipsis">
      Concepts Covered
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction-from-blueprint-to-building" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction: From Blueprint to Building
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-state-equation-the-heart-of-sequential-logic" class="md-nav__link">
    <span class="md-ellipsis">
      Next State Equation: The Heart of Sequential Logic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Next State Equation: The Heart of Sequential Logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deriving-next-state-equations-a-worked-example" class="md-nav__link">
    <span class="md-ellipsis">
      Deriving Next State Equations: A Worked Example
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deriving Next State Equations: A Worked Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-next-state-equation-derivation" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Next State Equation Derivation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-equation-speaking-to-the-outside-world" class="md-nav__link">
    <span class="md-ellipsis">
      Output Equation: Speaking to the Outside World
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output Equation: Speaking to the Outside World">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#moore-output-equations" class="md-nav__link">
    <span class="md-ellipsis">
      Moore Output Equations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mealy-output-equations" class="md-nav__link">
    <span class="md-ellipsis">
      Mealy Output Equations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mealy Output Equations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-moore-vs-mealy-output-timing" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Moore vs Mealy Output Timing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-fsm-design-process-your-recipe-for-success" class="md-nav__link">
    <span class="md-ellipsis">
      The FSM Design Process: Your Recipe for Success
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The FSM Design Process: Your Recipe for Success">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-fsm-design-process-flowchart" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: FSM Design Process Flowchart
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fsm-verification-trust-but-verify" class="md-nav__link">
    <span class="md-ellipsis">
      FSM Verification: Trust but Verify
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FSM Verification: Trust but Verify">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specification-level-verification" class="md-nav__link">
    <span class="md-ellipsis">
      Specification-Level Verification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-verification" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Verification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simulation-verification" class="md-nav__link">
    <span class="md-ellipsis">
      Simulation Verification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Simulation Verification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-fsm-verification-simulator" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: FSM Verification Simulator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formal-verification-brief-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Formal Verification (Brief Introduction)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sequence-detector-finding-patterns-in-data-streams" class="md-nav__link">
    <span class="md-ellipsis">
      Sequence Detector: Finding Patterns in Data Streams
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overlapping-detection-vs-non-overlapping-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Overlapping Detection vs Non-Overlapping Detection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overlapping Detection vs Non-Overlapping Detection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#non-overlapping-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Non-Overlapping Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overlapping-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Overlapping Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-differences" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Differences
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Differences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-overlapping-vs-non-overlapping-detector" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Overlapping vs Non-Overlapping Detector
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pattern-recognition-fsm-beyond-simple-sequences" class="md-nav__link">
    <span class="md-ellipsis">
      Pattern Recognition FSM: Beyond Simple Sequences
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pattern Recognition FSM: Beyond Simple Sequences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-detecting-rising-edge" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Detecting "Rising Edge"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-detecting-either-00-or-11" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Detecting Either "00" or "11"
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example: Detecting Either "00" or "11"">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-pattern-recognition-fsm-builder" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Pattern Recognition FSM Builder
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-traffic-light-controller-a-classic-example" class="md-nav__link">
    <span class="md-ellipsis">
      The Traffic Light Controller: A Classic Example
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Traffic Light Controller: A Classic Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Problem Specification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-design" class="md-nav__link">
    <span class="md-ellipsis">
      State Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timing-logic" class="md-nav__link">
    <span class="md-ellipsis">
      Timing Logic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      State Diagram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-table" class="md-nav__link">
    <span class="md-ellipsis">
      State Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-logic-moore" class="md-nav__link">
    <span class="md-ellipsis">
      Output Logic (Moore)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output Logic (Moore)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-traffic-light-controller-simulator" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Traffic Light Controller Simulator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#safety-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Safety Analysis
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-vending-machine-fsm-money-in-product-out" class="md-nav__link">
    <span class="md-ellipsis">
      The Vending Machine FSM: Money In, Product Out
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Vending Machine FSM: Money In, Product Out">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-specification_1" class="md-nav__link">
    <span class="md-ellipsis">
      Problem Specification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-design_1" class="md-nav__link">
    <span class="md-ellipsis">
      State Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-transitions" class="md-nav__link">
    <span class="md-ellipsis">
      State Transitions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moore-vs-mealy-consideration" class="md-nav__link">
    <span class="md-ellipsis">
      Moore vs Mealy Consideration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Moore vs Mealy Consideration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-vending-machine-simulator" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Vending Machine Simulator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deriving-the-equations" class="md-nav__link">
    <span class="md-ellipsis">
      Deriving the Equations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#putting-it-all-together-the-design-flow-in-action" class="md-nav__link">
    <span class="md-ellipsis">
      Putting It All Together: The Design Flow in Action
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Putting It All Together: The Design Flow in Action">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-garage-door-controller" class="md-nav__link">
    <span class="md-ellipsis">
      Problem: Garage Door Controller
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1-define-states" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Define States
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-state-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: State Diagram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-complete-state-table" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Complete State Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-choose-encoding" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Choose Encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-derive-equations" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Derive Equations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Step 6: Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-verify" class="md-nav__link">
    <span class="md-ellipsis">
      Step 7: Verify
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-design-patterns-and-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Common Design Patterns and Tips
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Design Patterns and Tips">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-debounce-fsm" class="md-nav__link">
    <span class="md-ellipsis">
      The Debounce FSM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-handshake-fsm" class="md-nav__link">
    <span class="md-ellipsis">
      The Handshake FSM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-watchdog-fsm" class="md-nav__link">
    <span class="md-ellipsis">
      The Watchdog FSM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tips-for-clean-fsm-design" class="md-nav__link">
    <span class="md-ellipsis">
      Tips for Clean FSM Design
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-and-key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Summary and Key Takeaways
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practice-problems" class="md-nav__link">
    <span class="md-ellipsis">
      Practice Problems
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="fsm-design-and-applications">FSM Design and Applications</h1>
<h2 id="summary">Summary</h2>
<p>This chapter applies FSM theory to practical design problems, teaching students the complete workflow from specification to implementation. Students will learn to derive next-state and output equations from state tables, follow the systematic FSM design process, and verify FSM designs for correctness. The chapter includes practical applications including sequence detectors with overlapping and non-overlapping detection modes, pattern recognition FSMs, and classic controller examples such as traffic light controllers and vending machine FSMs.</p>
<h2 id="concepts-covered">Concepts Covered</h2>
<p>This chapter covers the following 10 concepts from the learning graph:</p>
<ol>
<li>Next State Equation</li>
<li>Output Equation</li>
<li>FSM Design Process</li>
<li>FSM Verification</li>
<li>Sequence Detector</li>
<li>Pattern Recognition FSM</li>
<li>Overlapping Detection</li>
<li>Non-Overlapping Detection</li>
<li>Traffic Light Controller</li>
<li>Vending Machine FSM</li>
</ol>
<h2 id="prerequisites">Prerequisites</h2>
<p>This chapter builds on concepts from:</p>
<ul>
<li><a href="../09-fsm-fundamentals/">Chapter 9: Finite State Machine Fundamentals</a></li>
</ul>
<hr />
<h2 id="introduction-from-blueprint-to-building">Introduction: From Blueprint to Building</h2>
<p>In Chapter 9, you learned the vocabulary and grammar of finite state machines—states, transitions, Moore versus Mealy, encoding strategies. You learned to <em>read</em> state diagrams like a native speaker. Now it's time to <em>write</em> them.</p>
<p>Think of it this way: Chapter 9 taught you what an FSM <em>is</em>. This chapter teaches you what you can <em>do</em> with one.</p>
<p>Consider your morning routine. You probably have a fairly systematic process: alarm rings, you decide whether to snooze (a decision based on current state and inputs!), eventually you get up, shower, dress, eat, and leave. Each step depends on completing the previous one. You're running a finite state machine in your head—and you've been doing it since before you could spell "sequential logic."</p>
<p>The magic happens when we translate these human-intuitive processes into digital hardware. That's what this chapter is about: taking a word problem ("build me a traffic light controller") and systematically transforming it into flip-flops and gates that actually work.</p>
<p>By the end of this chapter, you'll be able to:</p>
<ul>
<li>Derive Boolean equations for next-state and output logic</li>
<li>Follow a systematic design process from specification to implementation</li>
<li>Build sequence detectors that find patterns in data streams</li>
<li>Design real-world controllers like traffic lights and vending machines</li>
<li>Verify that your FSM actually does what the specification says</li>
</ul>
<p>Ready to become an FSM architect? Let's build something!</p>
<h2 id="next-state-equation-the-heart-of-sequential-logic">Next State Equation: The Heart of Sequential Logic</h2>
<p>The <strong>next state equation</strong> is a Boolean expression that computes what state the FSM will enter on the next clock edge, based on the current state and inputs.</p>
<p>Remember from Chapter 9 that FSMs have this fundamental structure:</p>
<div class="arithmatex">\[S^+ = f(S, I)\]</div>
<p>Where <span class="arithmatex">\(S^+\)</span> is the next state, <span class="arithmatex">\(S\)</span> is the current state, and <span class="arithmatex">\(I\)</span> represents the inputs. The next state equation is simply the Boolean implementation of this function <span class="arithmatex">\(f\)</span>.</p>
<p>Since states are stored in flip-flops, and we typically use D flip-flops, the next state equation directly gives us the D input for each flip-flop:</p>
<div class="arithmatex">\[D_i = f_i(Q_{n-1}, Q_{n-2}, ..., Q_0, inputs)\]</div>
<p>Here's the practical insight: the next state equation is <em>just combinational logic</em>. You've been designing combinational circuits since Chapter 4. The only difference is that some of the inputs to this combinational circuit happen to be the outputs of flip-flops.</p>
<h3 id="deriving-next-state-equations-a-worked-example">Deriving Next State Equations: A Worked Example</h3>
<p>Let's derive next state equations for a simple 3-state FSM that detects the input sequence "01":</p>
<table>
<thead>
<tr>
<th>State</th>
<th>Encoding (Q1 Q0)</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>IDLE</td>
<td>00</td>
<td>Waiting for 0</td>
</tr>
<tr>
<td>SAW_0</td>
<td>01</td>
<td>Just saw 0, looking for 1</td>
</tr>
<tr>
<td>FOUND</td>
<td>10</td>
<td>Pattern detected!</td>
</tr>
</tbody>
</table>
<p>State transition table:</p>
<table>
<thead>
<tr>
<th>Current State</th>
<th>Q1 Q0</th>
<th>Input X</th>
<th>Next State</th>
<th>Q1+ Q0+</th>
</tr>
</thead>
<tbody>
<tr>
<td>IDLE</td>
<td>00</td>
<td>0</td>
<td>SAW_0</td>
<td>01</td>
</tr>
<tr>
<td>IDLE</td>
<td>00</td>
<td>1</td>
<td>IDLE</td>
<td>00</td>
</tr>
<tr>
<td>SAW_0</td>
<td>01</td>
<td>0</td>
<td>SAW_0</td>
<td>01</td>
</tr>
<tr>
<td>SAW_0</td>
<td>01</td>
<td>1</td>
<td>FOUND</td>
<td>10</td>
</tr>
<tr>
<td>FOUND</td>
<td>10</td>
<td>0</td>
<td>SAW_0</td>
<td>01</td>
</tr>
<tr>
<td>FOUND</td>
<td>10</td>
<td>1</td>
<td>IDLE</td>
<td>00</td>
</tr>
</tbody>
</table>
<p>Now we can derive <span class="arithmatex">\(Q_1^+\)</span> and <span class="arithmatex">\(Q_0^+\)</span> using K-maps or inspection.</p>
<p>For <span class="arithmatex">\(Q_1^+\)</span> (when does <span class="arithmatex">\(Q_1\)</span> become 1?):</p>
<p>Looking at the table, <span class="arithmatex">\(Q_1^+ = 1\)</span> only when we're in SAW_0 (Q1=0, Q0=1) and X=1.</p>
<div class="arithmatex">\[Q_1^+ = \overline{Q_1} \cdot Q_0 \cdot X\]</div>
<p>For <span class="arithmatex">\(Q_0^+\)</span> (when does <span class="arithmatex">\(Q_0\)</span> become 1?):</p>
<p><span class="arithmatex">\(Q_0^+ = 1\)</span> in these cases:</p>
<ul>
<li>IDLE with X=0: <span class="arithmatex">\(\overline{Q_1} \cdot \overline{Q_0} \cdot \overline{X}\)</span></li>
<li>SAW_0 with X=0: <span class="arithmatex">\(\overline{Q_1} \cdot Q_0 \cdot \overline{X}\)</span></li>
<li>FOUND with X=0: <span class="arithmatex">\(Q_1 \cdot \overline{Q_0} \cdot \overline{X}\)</span></li>
</ul>
<p>Simplifying (notice <span class="arithmatex">\(\overline{X}\)</span> is common to all terms):</p>
<div class="arithmatex">\[Q_0^+ = \overline{X}\]</div>
<p>That's a beautiful result—the next value of Q0 is simply the complement of the input!</p>
<h4 id="diagram-next-state-equation-derivation">Diagram: Next State Equation Derivation</h4>
<iframe src="../../sims/next-state-derivation/main.html" width="100%" height="500px" scrolling="no"></iframe>

<details>
<summary>Next State Equation Derivation Tool</summary>
<p>Type: microsim</p>
<p>Bloom Level: Apply (L3)
Bloom Verb: Derive</p>
<p>Learning Objective: Students will be able to derive next-state equations from a state transition table by identifying when each flip-flop output should be 1 and expressing it as a Boolean function of current state and inputs.</p>
<p>Instructional Rationale: Step-by-step derivation with K-map visualization shows how the abstract state table becomes concrete Boolean equations, making the connection between specification and implementation explicit.</p>
<p>Canvas Layout:</p>
<ul>
<li>Left panel: Editable state transition table</li>
<li>Center panel: K-maps for each next-state variable</li>
<li>Right panel: Derived equations with simplification steps</li>
<li>Bottom: Generated circuit showing next-state logic</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Edit state table entries and see K-maps update</li>
<li>Click K-map cells to see corresponding table rows</li>
<li>Toggle between SOP and POS forms</li>
<li>Show/hide simplification steps</li>
<li>Compare unsimplified vs simplified equations</li>
<li>Verify equation against original table</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>State table with binary encoding</li>
<li>K-map with grouped terms highlighted</li>
<li>Boolean equation in multiple forms</li>
<li>Gate count for each form</li>
<li>Verification results</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Clean tabular display</li>
<li>K-maps with standard grouping colors</li>
<li>Equations rendered in readable format</li>
<li>Circuit schematic with labeled connections</li>
<li>Color-coded correspondence between table, K-map, and equation</li>
</ul>
<p>Implementation: p5.js with K-map solver and equation simplification</p>
</details>
<div class="admonition tip">
<p class="admonition-title">K-maps Are Your Best Friend</p>
<p>For FSMs with 2-4 state variables and a few inputs, K-maps are the fastest way to derive minimized next-state equations. For larger FSMs, let synthesis tools do the heavy lifting—but understanding K-maps helps you verify the tools are giving you good results.</p>
</div>
<h2 id="output-equation-speaking-to-the-outside-world">Output Equation: Speaking to the Outside World</h2>
<p>The <strong>output equation</strong> computes the FSM's outputs based on the current state (for Moore machines) or the current state and inputs (for Mealy machines).</p>
<p>For a Moore machine:</p>
<div class="arithmatex">\[Output = g(S)\]</div>
<p>For a Mealy machine:</p>
<div class="arithmatex">\[Output = h(S, I)\]</div>
<p>Just like next-state equations, output equations are pure combinational logic. The only difference is what they depend on.</p>
<h3 id="moore-output-equations">Moore Output Equations</h3>
<p>For our sequence detector, let's make it a Moore machine where the output Z indicates "pattern found":</p>
<table>
<thead>
<tr>
<th>State</th>
<th>Encoding (Q1 Q0)</th>
<th>Output Z</th>
</tr>
</thead>
<tbody>
<tr>
<td>IDLE</td>
<td>00</td>
<td>0</td>
</tr>
<tr>
<td>SAW_0</td>
<td>01</td>
<td>0</td>
</tr>
<tr>
<td>FOUND</td>
<td>10</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>The output equation is simply:</p>
<div class="arithmatex">\[Z = Q_1 \cdot \overline{Q_0}\]</div>
<p>Or, since we're only using encoding 10 for FOUND (and 11 is unused), we could simplify to:</p>
<div class="arithmatex">\[Z = Q_1\]</div>
<p>This works because the only state where Q1=1 is FOUND.</p>
<h3 id="mealy-output-equations">Mealy Output Equations</h3>
<p>If we redesign as a Mealy machine, we can output Z=1 <em>during</em> the transition from SAW_0 to FOUND, not after:</p>
<table>
<thead>
<tr>
<th>Current State</th>
<th>Q1 Q0</th>
<th>Input X</th>
<th>Output Z</th>
</tr>
</thead>
<tbody>
<tr>
<td>IDLE</td>
<td>00</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>IDLE</td>
<td>00</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>SAW_0</td>
<td>01</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>SAW_0</td>
<td>01</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>FOUND</td>
<td>10</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>FOUND</td>
<td>10</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>The output equation:</p>
<div class="arithmatex">\[Z = \overline{Q_1} \cdot Q_0 \cdot X\]</div>
<p>Notice how the Mealy output depends on the input X as well as the state. The output activates <em>immediately</em> when we're in SAW_0 and see a 1, rather than waiting for the next clock cycle.</p>
<h4 id="diagram-moore-vs-mealy-output-timing">Diagram: Moore vs Mealy Output Timing</h4>
<iframe src="../../sims/moore-mealy-output-timing/main.html" width="100%" height="450px" scrolling="no"></iframe>

<details>
<summary>Moore vs Mealy Output Timing Comparison</summary>
<p>Type: microsim</p>
<p>Bloom Level: Analyze (L4)
Bloom Verb: Compare</p>
<p>Learning Objective: Students will be able to compare the timing behavior of Moore and Mealy output equations by observing when outputs change relative to clock edges and input changes.</p>
<p>Instructional Rationale: Side-by-side timing diagrams of the same FSM implemented as both Moore and Mealy clearly demonstrates the one-clock-cycle latency difference.</p>
<p>Canvas Layout:</p>
<ul>
<li>Top: Shared input waveform and clock</li>
<li>Middle: Moore implementation with state and output waveforms</li>
<li>Bottom: Mealy implementation with state and output waveforms</li>
<li>Right: Equation display for each implementation</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Play/pause simulation</li>
<li>Step through clock cycles</li>
<li>Toggle input values</li>
<li>Highlight the timing difference when pattern is detected</li>
<li>Show output equations for each type</li>
<li>Marker showing the one-cycle difference</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Clock waveform</li>
<li>Input X waveform</li>
<li>Moore: state waveform, output waveform (synchronized to clock)</li>
<li>Mealy: state waveform, output waveform (reacts to input)</li>
<li>Annotations showing cause of each output change</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Standard timing diagram format</li>
<li>Color coding: clock (black), input (blue), state (green), output (red)</li>
<li>Vertical dotted lines at clock edges</li>
<li>Highlight boxes around timing differences</li>
<li>Equations displayed alongside waveforms</li>
</ul>
<p>Implementation: p5.js with synchronized timing diagram animation</p>
</details>
<h2 id="the-fsm-design-process-your-recipe-for-success">The FSM Design Process: Your Recipe for Success</h2>
<p>The <strong>FSM design process</strong> is a systematic methodology for transforming a word problem into a working digital circuit. Following this process consistently helps you avoid errors and ensures your design is complete.</p>
<p>Here's the step-by-step recipe:</p>
<p><strong>Step 1: Understand the Specification</strong></p>
<ul>
<li>What are the inputs? (names, meanings, timing)</li>
<li>What are the outputs? (names, meanings, when they should activate)</li>
<li>What behavior is required? (sequences, conditions, edge cases)</li>
<li>Moore or Mealy? (do outputs need immediate response?)</li>
</ul>
<p><strong>Step 2: Define the States</strong></p>
<ul>
<li>What does the system need to "remember"?</li>
<li>Each distinct memory configuration is a state</li>
<li>Give states meaningful names</li>
<li>Identify the initial/reset state</li>
</ul>
<p><strong>Step 3: Draw the State Diagram</strong></p>
<ul>
<li>Draw circles for each state</li>
<li>Add transitions with input conditions</li>
<li>Label outputs (inside states for Moore, on arrows for Mealy)</li>
<li>Mark the initial state with an arrow</li>
</ul>
<p><strong>Step 4: Create the State Table</strong></p>
<ul>
<li>List every state × input combination</li>
<li>Fill in next state for each combination</li>
<li>Fill in outputs (checking Moore vs Mealy)</li>
<li>Verify every row is complete—no missing cases!</li>
</ul>
<p><strong>Step 5: Choose State Encoding</strong></p>
<ul>
<li>Binary: minimum flip-flops, more complex logic</li>
<li>One-hot: one flip-flop per state, simpler logic</li>
<li>Gray: single-bit transitions, good for certain patterns</li>
<li>Consider synthesis target (ASIC vs FPGA)</li>
</ul>
<p><strong>Step 6: Derive Next-State Equations</strong></p>
<ul>
<li>Create K-maps or truth tables for each flip-flop D input</li>
<li>Minimize the equations</li>
<li>Verify against original state table</li>
</ul>
<p><strong>Step 7: Derive Output Equations</strong></p>
<ul>
<li>Create K-maps from output columns</li>
<li>Moore: function of state bits only</li>
<li>Mealy: function of state bits AND inputs</li>
<li>Minimize the equations</li>
</ul>
<p><strong>Step 8: Implement the Circuit</strong></p>
<ul>
<li>D flip-flops for state register</li>
<li>Combinational logic for next-state equations</li>
<li>Combinational logic for output equations</li>
<li>Reset logic for initialization</li>
</ul>
<p><strong>Step 9: Verify the Design</strong></p>
<ul>
<li>Simulate with test vectors</li>
<li>Check every transition</li>
<li>Verify reset behavior</li>
<li>Test edge cases and error conditions</li>
</ul>
<h4 id="diagram-fsm-design-process-flowchart">Diagram: FSM Design Process Flowchart</h4>
<iframe src="../../sims/fsm-design-process/main.html" width="100%" height="550px" scrolling="no"></iframe>

<details>
<summary>Interactive FSM Design Process</summary>
<p>Type: workflow</p>
<p>Bloom Level: Apply (L3)
Bloom Verb: Execute</p>
<p>Learning Objective: Students will be able to execute the complete FSM design process by following the systematic workflow from specification through implementation, producing a verified circuit design.</p>
<p>Instructional Rationale: An interactive workflow that guides students through each design step, with validation at each stage, builds confidence and reinforces the systematic approach.</p>
<p>Canvas Layout:</p>
<ul>
<li>Left sidebar: Process steps (9 steps) with progress indicators</li>
<li>Main area: Current step workspace</li>
<li>Right sidebar: Accumulated design artifacts</li>
<li>Bottom: Navigation and validation controls</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Select from example problems or enter custom specification</li>
<li>Guided workspace for each step</li>
<li>Automatic validation before advancing</li>
<li>View and edit previous steps</li>
<li>Generate artifacts (state diagram, table, equations, circuit)</li>
<li>Final verification simulation</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Current step requirements and guidance</li>
<li>Design artifacts generated so far</li>
<li>Validation status for each step</li>
<li>Consistency checks between artifacts</li>
<li>Error messages with hints</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Clean step-by-step interface</li>
<li>Progress bar showing completion</li>
<li>Checkmarks for validated steps</li>
<li>Artifacts displayed with clear formatting</li>
<li>Final circuit schematic at completion</li>
</ul>
<p>Implementation: p5.js with multi-stage design environment</p>
</details>
<p>The design process might seem like a lot of steps, but each step is straightforward on its own. The key is to be systematic and complete each step fully before moving to the next. Skipping steps or combining them often leads to errors that are hard to track down later.</p>
<div class="admonition warning">
<p class="admonition-title">Complete Every Row</p>
<p>The most common FSM design error is leaving holes in the state table—undefined behavior for some state × input combination. When you implement the circuit, these cases will have <em>some</em> behavior (probably not what you wanted). Always check that every row is filled in!</p>
</div>
<h2 id="fsm-verification-trust-but-verify">FSM Verification: Trust but Verify</h2>
<p><strong>FSM verification</strong> is the process of confirming that an FSM implementation correctly matches its specification. Verification catches errors before they become bugs in silicon.</p>
<p>Verification happens at multiple levels:</p>
<h3 id="specification-level-verification">Specification-Level Verification</h3>
<p>Before you even start implementing, verify your state diagram/table against the original requirements:</p>
<ul>
<li>Does the FSM handle every input condition?</li>
<li>Are all edge cases covered?</li>
<li>Is the reset behavior correct?</li>
<li>Do the outputs match what's expected?</li>
</ul>
<h3 id="implementation-verification">Implementation Verification</h3>
<p>After deriving equations and implementing the circuit:</p>
<ul>
<li><strong>Equation checking</strong>: Do the next-state equations produce the correct next state for every table row?</li>
<li><strong>Output checking</strong>: Do output equations produce correct outputs for every state (Moore) or state+input (Mealy)?</li>
<li><strong>Coverage</strong>: Have you tested every transition, not just the "interesting" ones?</li>
</ul>
<h3 id="simulation-verification">Simulation Verification</h3>
<p>Create test vectors that exercise the FSM:</p>
<ol>
<li><strong>Reset test</strong>: Apply reset, verify initial state</li>
<li><strong>All-transitions test</strong>: Visit every transition at least once</li>
<li><strong>Sequence tests</strong>: Apply known input sequences, verify output sequences</li>
<li><strong>Corner case tests</strong>: What happens with unusual input patterns?</li>
</ol>
<p>A useful verification approach is <strong>exhaustive testing</strong> for small FSMs: apply every possible input sequence up to some length and verify correct behavior. For a 4-state FSM with 1 input, there are only <span class="arithmatex">\(4 \times 2 = 8\)</span> state-input combinations to test.</p>
<h4 id="diagram-fsm-verification-simulator">Diagram: FSM Verification Simulator</h4>
<iframe src="../../sims/fsm-verification/main.html" width="100%" height="550px" scrolling="no"></iframe>

<details>
<summary>FSM Verification and Testing Tool</summary>
<p>Type: microsim</p>
<p>Bloom Level: Evaluate (L5)
Bloom Verb: Validate</p>
<p>Learning Objective: Students will be able to validate an FSM implementation by applying test vectors, comparing actual behavior to expected behavior, and identifying any discrepancies between specification and implementation.</p>
<p>Instructional Rationale: Interactive verification where students can test their own FSM designs builds debugging skills and reinforces the importance of systematic testing.</p>
<p>Canvas Layout:</p>
<ul>
<li>Left: FSM specification (state diagram or table)</li>
<li>Center: Test vector input area and simulation controls</li>
<li>Right: Results display with pass/fail indicators</li>
<li>Bottom: Detailed trace showing expected vs actual</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Enter or load FSM specification</li>
<li>Input test vectors manually or auto-generate</li>
<li>Run single test or batch test</li>
<li>Compare expected output to actual output</li>
<li>Highlight failing tests</li>
<li>Show transition trace for debugging</li>
<li>Coverage report showing tested transitions</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Test vector (input sequence)</li>
<li>Expected state sequence</li>
<li>Actual state sequence</li>
<li>Expected output sequence</li>
<li>Actual output sequence</li>
<li>Pass/fail status for each vector</li>
<li>Overall coverage metrics</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Clear tabular test results</li>
<li>Green/red highlighting for pass/fail</li>
<li>State diagram with tested transitions highlighted</li>
<li>Coverage percentage display</li>
<li>Detailed error messages for failures</li>
</ul>
<p>Implementation: p5.js with FSM simulator and test framework</p>
</details>
<h3 id="formal-verification-brief-introduction">Formal Verification (Brief Introduction)</h3>
<p>For critical applications (aerospace, medical, automotive), simulation isn't enough. <strong>Formal verification</strong> uses mathematical techniques to <em>prove</em> that the implementation matches the specification for <em>all</em> possible inputs, not just the ones you tested.</p>
<p>Tools like model checkers can verify properties such as:</p>
<ul>
<li>"The FSM never enters state X if input Y has been seen"</li>
<li>"From every reachable state, the FSM can eventually return to IDLE"</li>
<li>"Output Z is never asserted for more than 3 consecutive cycles"</li>
</ul>
<p>Formal verification is beyond the scope of this course, but knowing it exists is valuable. When you're designing the braking system for a car, "we tested it a bunch and it seemed to work" isn't good enough!</p>
<div class="admonition tip">
<p class="admonition-title">Test the Transitions, Not Just the States</p>
<p>A common verification mistake is testing that the FSM can reach each state, without testing all the transitions. An FSM might correctly reach states A, B, and C, but have a bug in the transition from B to C when input X=1. Test every edge in the state diagram.</p>
</div>
<h2 id="sequence-detector-finding-patterns-in-data-streams">Sequence Detector: Finding Patterns in Data Streams</h2>
<p>A <strong>sequence detector</strong> is an FSM that monitors an input stream and outputs a signal when a specific pattern is detected. Sequence detectors are fundamental building blocks in:</p>
<ul>
<li>Serial communication (detecting start bits, patterns, framing)</li>
<li>Pattern matching (searching data for signatures)</li>
<li>Protocol decoding (recognizing command sequences)</li>
<li>Security (detecting attack signatures)</li>
</ul>
<p>The basic structure of a sequence detector:</p>
<ul>
<li><strong>One input bit</strong> (the data stream)</li>
<li><strong>One output bit</strong> (asserted when pattern found)</li>
<li><strong>States</strong> representing "how much of the pattern we've seen"</li>
</ul>
<p>Let's design a detector for the pattern "101":</p>
<p><strong>States:</strong></p>
<ul>
<li>S0 (IDLE): Haven't matched anything useful</li>
<li>S1: Just saw "1"</li>
<li>S2: Just saw "10"</li>
<li>S3: Just saw "101" — pattern found!</li>
</ul>
<p>The key insight is that each state represents <em>partial progress</em> toward the complete pattern. We need to track how many bits of the target pattern we've successfully matched.</p>
<p><strong>State Diagram:</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>        ┌─0─┐                            ┌─1─┐
        │   ▼                            │   ▼
   ┌─────────┐    1    ┌─────────┐   0   ┌─────────┐   1   ┌─────────┐
──▶│   S0    │────────▶│   S1    │──────▶│   S2    │──────▶│   S3    │
   │  out=0  │         │  out=0  │       │  out=0  │       │  out=1  │
   └─────────┘         └─────────┘       └─────────┘       └─────────┘
        ▲                   │ 1              ▲ 0               │
        │                   │                │                 │
        │                   └── stays ───────┘                 │
        └──────────────────────────────────────────────────────┘
</code></pre></div></td></tr></table></div>
<p>Wait—that diagram has a problem! What happens after we detect the pattern? We need to define transitions from S3 back into the pattern matching process. This brings us to an important distinction...</p>
<h2 id="overlapping-detection-vs-non-overlapping-detection">Overlapping Detection vs Non-Overlapping Detection</h2>
<p>When designing sequence detectors, you must decide: after detecting the pattern, can a new pattern <em>overlap</em> with the one just found?</p>
<h3 id="non-overlapping-detection">Non-Overlapping Detection</h3>
<p>In <strong>non-overlapping detection</strong>, after detecting a pattern, the FSM resets and starts looking for a completely new occurrence. No part of the just-detected pattern can be used for the next detection.</p>
<p>For pattern "101" with non-overlapping detection:</p>
<p>Input stream: <code>1 0 1 0 1 0 1</code>
             <code>↑---↑     ↑---↑</code>
             <code>First     Second</code>
             <code>detect    detect</code></p>
<p>The FSM resets after each detection, so "101<strong>01</strong>" doesn't count as two overlapping "101" patterns.</p>
<h3 id="overlapping-detection">Overlapping Detection</h3>
<p>In <strong>overlapping detection</strong>, the suffix of one detected pattern can be the prefix of the next. This is useful when patterns can share characters.</p>
<p>For pattern "101" with overlapping detection:</p>
<p>Input stream: <code>1 0 1 0 1</code>
             <code>↑---↑</code>
             <code>First detect</code>
             <code>↑---↑</code>
             <code>Second detect!</code></p>
<p>After detecting "101", we've already seen "1"—the start of another potential "101"! The overlapping detector recognizes this and immediately starts matching from S1, not S0.</p>
<h3 id="implementation-differences">Implementation Differences</h3>
<p>The difference is in the transitions <em>from</em> the detection state:</p>
<p><strong>Non-overlapping (S3 always goes back to start):</strong></p>
<table>
<thead>
<tr>
<th>From S3</th>
<th>Input</th>
<th>Next State</th>
</tr>
</thead>
<tbody>
<tr>
<td>S3</td>
<td>0</td>
<td>S0</td>
</tr>
<tr>
<td>S3</td>
<td>1</td>
<td>S0</td>
</tr>
</tbody>
</table>
<p><strong>Overlapping (S3 considers the input as potentially starting new pattern):</strong></p>
<table>
<thead>
<tr>
<th>From S3</th>
<th>Input</th>
<th>Next State</th>
</tr>
</thead>
<tbody>
<tr>
<td>S3</td>
<td>0</td>
<td>S2 (we just saw "1", now "10")</td>
</tr>
<tr>
<td>S3</td>
<td>1</td>
<td>S1 (the "1" starts a new pattern)</td>
</tr>
</tbody>
</table>
<p>In the overlapping case, the "1" at the end of "101" is <em>reused</em> as the beginning of the next potential "101".</p>
<h4 id="diagram-overlapping-vs-non-overlapping-detector">Diagram: Overlapping vs Non-Overlapping Detector</h4>
<iframe src="../../sims/overlap-detection-compare/main.html" width="100%" height="500px" scrolling="no"></iframe>

<details>
<summary>Overlapping vs Non-Overlapping Sequence Detection</summary>
<p>Type: microsim</p>
<p>Bloom Level: Analyze (L4)
Bloom Verb: Differentiate</p>
<p>Learning Objective: Students will be able to differentiate between overlapping and non-overlapping sequence detection by comparing how each approach handles input streams where patterns share prefix/suffix characters.</p>
<p>Instructional Rationale: Side-by-side comparison with the same input stream shows exactly when and why the two approaches produce different outputs.</p>
<p>Canvas Layout:</p>
<ul>
<li>Top: Input stream display with editable bits</li>
<li>Middle-left: Non-overlapping detector state diagram and trace</li>
<li>Middle-right: Overlapping detector state diagram and trace</li>
<li>Bottom: Output comparison showing detection events</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Edit input stream or use preset patterns</li>
<li>Step through one bit at a time</li>
<li>Run automatically</li>
<li>Highlight current state in both diagrams</li>
<li>Show when outputs differ</li>
<li>Count total detections for each type</li>
<li>Choose different patterns to detect</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Input bit stream with position marker</li>
<li>Current state for both detectors</li>
<li>Output signal for both detectors</li>
<li>Detection count for both</li>
<li>Visual highlighting when they differ</li>
<li>Transition history</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Parallel state diagrams with current state highlighted</li>
<li>Input stream as horizontal bit sequence</li>
<li>Output waveforms below each detector</li>
<li>Color coding when outputs differ</li>
<li>Detection markers on input stream</li>
</ul>
<p>Implementation: p5.js with dual FSM simulation</p>
</details>
<p>Here's a practical example. Searching a string for all occurrences of "AA":</p>
<ul>
<li>In "AAA", non-overlapping finds ONE match (positions 0-1), then resets</li>
<li>In "AAA", overlapping finds TWO matches (positions 0-1 AND positions 1-2)</li>
</ul>
<p>Which one you use depends on the application. For searching DNA sequences, you probably want overlapping. For framing serial data, you probably want non-overlapping.</p>
<div class="admonition note">
<p class="admonition-title">Overlap Requires Careful Transition Design</p>
<p>The tricky part of overlapping detection is figuring out where to go after detecting the pattern. You need to ask: "After seeing the complete pattern, what state would I be in if this last portion had been the start of a new pattern?" The answer often requires reusing suffix as prefix.</p>
</div>
<h2 id="pattern-recognition-fsm-beyond-simple-sequences">Pattern Recognition FSM: Beyond Simple Sequences</h2>
<p>A <strong>pattern recognition FSM</strong> extends the sequence detector concept to more complex patterns, possibly with multiple input bits, wildcards, or alternative paths.</p>
<p>While simple sequence detectors look for a fixed string like "101", pattern recognition FSMs can handle:</p>
<ul>
<li><strong>Multiple input bits</strong>: Pattern "AB" where A and B are different inputs</li>
<li><strong>Don't-care positions</strong>: Pattern "1X1" matching "101" or "111"</li>
<li><strong>Alternative patterns</strong>: Detect "101" OR "110"</li>
<li><strong>Counted repetitions</strong>: Detect "1" repeated 3 or more times</li>
<li><strong>Complex protocols</strong>: Handshake sequences with acknowledgments</li>
</ul>
<h3 id="example-detecting-rising-edge">Example: Detecting "Rising Edge"</h3>
<p>A simple but useful pattern recognizer detects a "rising edge"—the input transitioning from 0 to 1.</p>
<p><strong>States:</strong></p>
<ul>
<li>LOW: Input was 0 on last cycle</li>
<li>HIGH: Input was 1 on last cycle</li>
</ul>
<p><strong>Transitions and Outputs (Mealy):</strong></p>
<table>
<thead>
<tr>
<th>State</th>
<th>Input</th>
<th>Next State</th>
<th>Output (edge detected)</th>
</tr>
</thead>
<tbody>
<tr>
<td>LOW</td>
<td>0</td>
<td>LOW</td>
<td>0</td>
</tr>
<tr>
<td>LOW</td>
<td>1</td>
<td>HIGH</td>
<td>1 ← Edge detected!</td>
</tr>
<tr>
<td>HIGH</td>
<td>0</td>
<td>LOW</td>
<td>0</td>
</tr>
<tr>
<td>HIGH</td>
<td>1</td>
<td>HIGH</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>This 2-state FSM produces a one-cycle pulse whenever the input transitions from 0 to 1. Simple, useful, and found in countless digital designs.</p>
<h3 id="example-detecting-either-00-or-11">Example: Detecting Either "00" or "11"</h3>
<p>Let's design a pattern FSM that detects two consecutive identical bits:</p>
<p><strong>States:</strong></p>
<ul>
<li>IDLE: Just started or just detected (waiting)</li>
<li>SAW_0: Last bit was 0</li>
<li>SAW_1: Last bit was 1</li>
</ul>
<p><strong>Transitions (Moore machine):</strong></p>
<table>
<thead>
<tr>
<th>State</th>
<th>Input</th>
<th>Next State</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr>
<td>IDLE</td>
<td>0</td>
<td>SAW_0</td>
<td>0</td>
</tr>
<tr>
<td>IDLE</td>
<td>1</td>
<td>SAW_1</td>
<td>0</td>
</tr>
<tr>
<td>SAW_0</td>
<td>0</td>
<td>IDLE</td>
<td>1 (detected "00")</td>
</tr>
<tr>
<td>SAW_0</td>
<td>1</td>
<td>SAW_1</td>
<td>0</td>
</tr>
<tr>
<td>SAW_1</td>
<td>0</td>
<td>SAW_0</td>
<td>0</td>
</tr>
<tr>
<td>SAW_1</td>
<td>1</td>
<td>IDLE</td>
<td>1 (detected "11")</td>
</tr>
</tbody>
</table>
<p>This FSM has <em>two paths</em> to the detection output—one through SAW_0 and one through SAW_1. Pattern FSMs often have this multi-path structure.</p>
<h4 id="diagram-pattern-recognition-fsm-builder">Diagram: Pattern Recognition FSM Builder</h4>
<iframe src="../../sims/pattern-fsm-builder/main.html" width="100%" height="550px" scrolling="no"></iframe>

<details>
<summary>Pattern Recognition FSM Design Tool</summary>
<p>Type: microsim</p>
<p>Bloom Level: Create (L6)
Bloom Verb: Design</p>
<p>Learning Objective: Students will be able to design pattern recognition FSMs by specifying target patterns (including multi-bit inputs, alternatives, and don't-cares) and generating the corresponding state diagram and implementation.</p>
<p>Instructional Rationale: Creative tool for designing custom pattern FSMs lets students explore how different pattern requirements affect FSM complexity and structure.</p>
<p>Canvas Layout:</p>
<ul>
<li>Top: Pattern specification input (with syntax for alternatives, wildcards)</li>
<li>Center: Generated state diagram</li>
<li>Right: State table for the pattern</li>
<li>Bottom: Test area to verify pattern detection</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Enter pattern specification</li>
<li>Generate FSM automatically</li>
<li>Manually edit/adjust generated FSM</li>
<li>Test with sample input streams</li>
<li>Show all paths that lead to detection</li>
<li>Export as Verilog or truth table</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Pattern specification</li>
<li>Number of states required</li>
<li>State diagram with labeled transitions</li>
<li>State table</li>
<li>Test results</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Pattern input with syntax highlighting</li>
<li>Clean state diagram layout</li>
<li>Multiple detection paths highlighted differently</li>
<li>Test simulation with step-through</li>
</ul>
<p>Implementation: p5.js with pattern parser and FSM generator</p>
</details>
<h2 id="the-traffic-light-controller-a-classic-example">The Traffic Light Controller: A Classic Example</h2>
<p>The <strong>traffic light controller</strong> is the "Hello World" of FSM design. Every digital design course teaches it, and for good reason—it's practical, relatable, and complex enough to illustrate real FSM design challenges.</p>
<h3 id="problem-specification">Problem Specification</h3>
<p>Design a controller for a simple intersection with:</p>
<ul>
<li>Two traffic lights: Main Street (NS) and Side Street (EW)</li>
<li>Inputs:</li>
<li>CLK: System clock (assume 1 Hz for simplicity)</li>
<li>SENSOR: 1 if a car is waiting on the side street</li>
<li>Outputs:</li>
<li>NS_GREEN, NS_YELLOW, NS_RED</li>
<li>EW_GREEN, EW_YELLOW, EW_RED</li>
<li>Requirements:</li>
<li>Main street is normally green</li>
<li>If sensor detects a car on side street, eventually switch</li>
<li>Yellow lights last 3 seconds</li>
<li>Green lights last at least 10 seconds</li>
<li>Never have both directions green simultaneously!</li>
</ul>
<h3 id="state-design">State Design</h3>
<p>What does the controller need to remember?</p>
<ul>
<li>Which direction currently has right-of-way</li>
<li>Whether we're in green, yellow, or red phase</li>
<li>How long we've been in the current phase (for timing)</li>
</ul>
<p>We could encode the timer as part of the state, but that would create many states (NS_GREEN_1, NS_GREEN_2, ... NS_GREEN_10). A better approach: use a separate counter and just track the phase.</p>
<p><strong>States:</strong></p>
<ul>
<li>NS_GREEN: Main street has green, side street has red</li>
<li>NS_YELLOW: Main street has yellow (about to go red)</li>
<li>EW_GREEN: Side street has green, main street has red</li>
<li>EW_YELLOW: Side street has yellow (about to go red)</li>
</ul>
<h3 id="timing-logic">Timing Logic</h3>
<p>For timing, we use a counter that counts clock cycles. The FSM receives a TIMER_DONE signal from the counter and can RESET the timer on state transitions.</p>
<p>This is a common pattern: separate the FSM (state transitions) from the datapath (counting). The FSM becomes simpler because it doesn't need to track every count value—just "timer done" or "timer not done."</p>
<h3 id="state-diagram">State Diagram</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code>                         ┌────────────────┐
                         │   NS_GREEN     │
                         │ NS=G, EW=R     │◀───────────────────┐
                         │ Timer=10s      │                    │
                         └───────┬────────┘                    │
                                 │ Timer_done AND Sensor       │
                                 ▼                             │
                         ┌────────────────┐                    │
                         │   NS_YELLOW    │                    │
                         │ NS=Y, EW=R     │                    │
                         │ Timer=3s       │                    │
                         └───────┬────────┘                    │
                                 │ Timer_done                  │
                                 ▼                             │
                         ┌────────────────┐                    │
                         │   EW_GREEN     │                    │
                         │ NS=R, EW=G     │                    │
                         │ Timer=10s      │                    │
                         └───────┬────────┘                    │
                                 │ Timer_done                  │
                                 ▼                             │
                         ┌────────────────┐                    │
                         │   EW_YELLOW    │                    │
                         │ NS=R, EW=Y     │                    │
                         │ Timer=3s       │                    │
                         └───────┴────────────────────────────┘
                                   Timer_done
</code></pre></div></td></tr></table></div>
<h3 id="state-table">State Table</h3>
<table>
<thead>
<tr>
<th>State</th>
<th>Timer_done</th>
<th>Sensor</th>
<th>Next State</th>
<th>NS Light</th>
<th>EW Light</th>
</tr>
</thead>
<tbody>
<tr>
<td>NS_GREEN</td>
<td>0</td>
<td>X</td>
<td>NS_GREEN</td>
<td>G</td>
<td>R</td>
</tr>
<tr>
<td>NS_GREEN</td>
<td>1</td>
<td>0</td>
<td>NS_GREEN</td>
<td>G</td>
<td>R</td>
</tr>
<tr>
<td>NS_GREEN</td>
<td>1</td>
<td>1</td>
<td>NS_YELLOW</td>
<td>Y</td>
<td>R</td>
</tr>
<tr>
<td>NS_YELLOW</td>
<td>0</td>
<td>X</td>
<td>NS_YELLOW</td>
<td>Y</td>
<td>R</td>
</tr>
<tr>
<td>NS_YELLOW</td>
<td>1</td>
<td>X</td>
<td>EW_GREEN</td>
<td>R</td>
<td>G</td>
</tr>
<tr>
<td>EW_GREEN</td>
<td>0</td>
<td>X</td>
<td>EW_GREEN</td>
<td>R</td>
<td>G</td>
</tr>
<tr>
<td>EW_GREEN</td>
<td>1</td>
<td>X</td>
<td>EW_YELLOW</td>
<td>R</td>
<td>Y</td>
</tr>
<tr>
<td>EW_YELLOW</td>
<td>0</td>
<td>X</td>
<td>EW_YELLOW</td>
<td>R</td>
<td>Y</td>
</tr>
<tr>
<td>EW_YELLOW</td>
<td>1</td>
<td>X</td>
<td>NS_GREEN</td>
<td>G</td>
<td>R</td>
</tr>
</tbody>
</table>
<h3 id="output-logic-moore">Output Logic (Moore)</h3>
<p>With binary encoding (NS_GREEN=00, NS_YELLOW=01, EW_GREEN=10, EW_YELLOW=11):</p>
<p>[NS_GREEN = \overline{Q_1} \cdot \overline{Q_0}]
[NS_YELLOW = \overline{Q_1} \cdot Q_0]
[NS_RED = Q_1]
[EW_GREEN = Q_1 \cdot \overline{Q_0}]
[EW_YELLOW = Q_1 \cdot Q_0]
[EW_RED = \overline{Q_1}]</p>
<p>Or more simply:</p>
<p>[NS_RED = Q_1]
[EW_RED = \overline{Q_1}]</p>
<p>These equations guarantee the safety property: exactly one direction has red when the other doesn't.</p>
<h4 id="diagram-traffic-light-controller-simulator">Diagram: Traffic Light Controller Simulator</h4>
<iframe src="../../sims/traffic-light-controller/main.html" width="100%" height="600px" scrolling="no"></iframe>

<details>
<summary>Interactive Traffic Light Controller</summary>
<p>Type: microsim</p>
<p>Bloom Level: Apply (L3)
Bloom Verb: Implement</p>
<p>Learning Objective: Students will be able to implement and operate a traffic light controller FSM by observing how sensor inputs trigger state transitions and how timing constraints are maintained through the FSM structure.</p>
<p>Instructional Rationale: Visual simulation of traffic lights responding to sensor inputs makes the abstract FSM tangible and shows why proper sequencing matters for safety.</p>
<p>Canvas Layout:</p>
<ul>
<li>Center: Intersection visualization with traffic lights and cars</li>
<li>Right: State diagram with current state highlighted</li>
<li>Bottom: Timeline showing state transitions and light changes</li>
<li>Left: Control panel (sensor simulation, speed control)</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Toggle car sensor on/off</li>
<li>Adjust simulation speed</li>
<li>Pause and step through transitions</li>
<li>Show timing countdown</li>
<li>Highlight safety properties (never both green)</li>
<li>Inject faults to see what goes wrong</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Current state name</li>
<li>Timer value</li>
<li>Sensor status</li>
<li>Light colors for both directions</li>
<li>Transition about to occur</li>
<li>Safety property verification</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Realistic intersection with colored lights</li>
<li>Cars appearing/disappearing on side street</li>
<li>Timer countdown display</li>
<li>State diagram with animated transitions</li>
<li>Safety indicators (green checkmark when safe)</li>
</ul>
<p>Implementation: p5.js with intersection graphics and FSM simulation</p>
</details>
<h3 id="safety-analysis">Safety Analysis</h3>
<p>A key property of traffic light controllers is <strong>safety</strong>: never allow conflicting green lights. How do we verify this?</p>
<p>Looking at our states:</p>
<ul>
<li>NS_GREEN: NS=G, EW=R ✓</li>
<li>NS_YELLOW: NS=Y, EW=R ✓</li>
<li>EW_GREEN: NS=R, EW=G ✓</li>
<li>EW_YELLOW: NS=R, EW=Y ✓</li>
</ul>
<p>Every state has at least one direction red. Safety property: verified!</p>
<p>But wait—what about <em>during</em> transitions? In real hardware, there might be a brief moment when flip-flops are switching. Could we have NS=G and EW=G for a glitch?</p>
<p>This is why we use synchronous design (all changes on clock edges) and often add an "all-red" state during transitions. Real traffic controllers are carefully designed and tested for these edge cases.</p>
<div class="admonition warning">
<p class="admonition-title">Real Traffic Controllers Are More Complex</p>
<p>The example here is simplified for teaching. Real traffic controllers handle pedestrian signals, left turn arrows, emergency vehicle preemption, adaptive timing based on traffic flow, failure modes (flash red), and much more. But they're still FSMs at heart—just bigger ones!</p>
</div>
<h2 id="the-vending-machine-fsm-money-in-product-out">The Vending Machine FSM: Money In, Product Out</h2>
<p>The <strong>vending machine FSM</strong> is another classic example that demonstrates FSMs handling cumulative input (counting money) and producing actions (dispensing product, giving change).</p>
<h3 id="problem-specification_1">Problem Specification</h3>
<p>Design a vending machine controller for:</p>
<ul>
<li>Product price: 25 cents</li>
<li>Accepted coins: Nickel (5¢), Dime (10¢), Quarter (25¢)</li>
<li>Inputs:</li>
<li>N: Nickel inserted</li>
<li>D: Dime inserted</li>
<li>Q: Quarter inserted</li>
<li>Outputs:</li>
<li>DISPENSE: Release the product</li>
<li>CHANGE_5: Return a nickel</li>
<li>CHANGE_10: Return a dime</li>
</ul>
<p>Assume only one coin can be inserted per clock cycle.</p>
<h3 id="state-design_1">State Design</h3>
<p>States represent accumulated money:</p>
<table>
<thead>
<tr>
<th>State</th>
<th>Amount</th>
<th>Encoding</th>
</tr>
</thead>
<tbody>
<tr>
<td>S0</td>
<td>0¢</td>
<td>000</td>
</tr>
<tr>
<td>S5</td>
<td>5¢</td>
<td>001</td>
</tr>
<tr>
<td>S10</td>
<td>10¢</td>
<td>010</td>
</tr>
<tr>
<td>S15</td>
<td>15¢</td>
<td>011</td>
</tr>
<tr>
<td>S20</td>
<td>20¢</td>
<td>100</td>
</tr>
</tbody>
</table>
<p>When we reach 25¢ or more, we dispense and return to S0 (giving change if overpaid).</p>
<h3 id="state-transitions">State Transitions</h3>
<table>
<thead>
<tr>
<th>Current</th>
<th>Coin</th>
<th>Next</th>
<th>Dispense</th>
<th>Change</th>
</tr>
</thead>
<tbody>
<tr>
<td>S0</td>
<td>None</td>
<td>S0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>S0</td>
<td>N</td>
<td>S5</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>S0</td>
<td>D</td>
<td>S10</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>S0</td>
<td>Q</td>
<td>S0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>S5</td>
<td>None</td>
<td>S5</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>S5</td>
<td>N</td>
<td>S10</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>S5</td>
<td>D</td>
<td>S15</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>S5</td>
<td>Q</td>
<td>S0</td>
<td>1</td>
<td>5¢</td>
</tr>
<tr>
<td>S10</td>
<td>None</td>
<td>S10</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>S10</td>
<td>N</td>
<td>S15</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>S10</td>
<td>D</td>
<td>S20</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>S10</td>
<td>Q</td>
<td>S0</td>
<td>1</td>
<td>10¢</td>
</tr>
<tr>
<td>S15</td>
<td>None</td>
<td>S15</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>S15</td>
<td>N</td>
<td>S20</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>S15</td>
<td>D</td>
<td>S0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>S15</td>
<td>Q</td>
<td>S0</td>
<td>1</td>
<td>15¢</td>
</tr>
<tr>
<td>S20</td>
<td>None</td>
<td>S20</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>S20</td>
<td>N</td>
<td>S0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>S20</td>
<td>D</td>
<td>S0</td>
<td>1</td>
<td>5¢</td>
</tr>
<tr>
<td>S20</td>
<td>Q</td>
<td>S0</td>
<td>1</td>
<td>20¢</td>
</tr>
</tbody>
</table>
<h3 id="moore-vs-mealy-consideration">Moore vs Mealy Consideration</h3>
<p>Should the vending machine be Moore or Mealy?</p>
<p><strong>Moore approach</strong>: Separate states for "dispense and give change" conditions. Would need additional states like "S25_NO_CHANGE", "S30_RETURN_5", etc.</p>
<p><strong>Mealy approach</strong>: Output depends on state AND coin input. Dispense and change happen on the transition that reaches/exceeds 25¢.</p>
<p>The Mealy approach is cleaner here—we avoid extra states and the outputs are naturally associated with the "purchase complete" transitions.</p>
<h4 id="diagram-vending-machine-simulator">Diagram: Vending Machine Simulator</h4>
<iframe src="../../sims/vending-machine-fsm/main.html" width="100%" height="600px" scrolling="no"></iframe>

<details>
<summary>Interactive Vending Machine FSM</summary>
<p>Type: microsim</p>
<p>Bloom Level: Apply (L3)
Bloom Verb: Execute</p>
<p>Learning Objective: Students will be able to execute vending machine transactions by inserting coins and observing how the FSM tracks accumulated value, triggers product dispensing at the threshold, and calculates correct change.</p>
<p>Instructional Rationale: Interactive vending simulation makes the cumulative nature of the FSM clear—students see how partial payments are tracked and how different coin combinations reach the same goal.</p>
<p>Canvas Layout:</p>
<ul>
<li>Left: Vending machine graphic with coin slot and product display</li>
<li>Center: State diagram with current state and balance highlighted</li>
<li>Right: Transaction log showing coins inserted, dispensed product, change returned</li>
<li>Bottom: Coin insertion buttons (N, D, Q) and reset</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Insert coins with button clicks</li>
<li>Watch balance accumulate</li>
<li>See product dispense animation</li>
<li>See change returned animation</li>
<li>View state transitions in real time</li>
<li>Try different coin combinations</li>
<li>See total transactions completed</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Current balance</li>
<li>Current state</li>
<li>What each coin will do (preview)</li>
<li>Product dispensed count</li>
<li>Change given breakdown</li>
<li>State transition about to occur</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Colorful vending machine graphic</li>
<li>Animated coin insertion</li>
<li>Animated product drop</li>
<li>Animated change return</li>
<li>State diagram with glowing current state</li>
<li>Balance display (like real machine)</li>
</ul>
<p>Implementation: p5.js with vending machine graphics and FSM simulation</p>
</details>
<h3 id="deriving-the-equations">Deriving the Equations</h3>
<p>Let's derive some key equations. For the DISPENSE output (Mealy):</p>
<p>DISPENSE = 1 when:</p>
<ul>
<li>S0 and Q (25¢ reached exactly)</li>
<li>S5 and Q (30¢ reached)</li>
<li>S10 and Q (35¢ reached)</li>
<li>S10 and D (reaching 20¢... wait, that's not 25¢)</li>
</ul>
<p>Let me recalculate. DISPENSE when total ≥ 25¢:</p>
<ul>
<li>S0 + Q = 25¢ ✓</li>
<li>S5 + D + D = 25¢... but we can only insert one coin at a time</li>
<li>S5 + Q = 30¢ ✓</li>
<li>S10 + D + N = 25¢... two coins</li>
<li>S10 + Q = 35¢ ✓</li>
<li>S15 + D = 25¢ ✓</li>
<li>S15 + Q = 40¢ ✓</li>
<li>S20 + N = 25¢ ✓</li>
<li>S20 + D = 30¢ ✓</li>
<li>S20 + Q = 45¢ ✓</li>
</ul>
<p>Using encoding (S0=000, S5=001, S10=010, S15=011, S20=100):</p>
<div class="arithmatex">\[DISPENSE = Q + (Q_2 \cdot \overline{Q_1} \cdot \overline{Q_0}) + ...\]</div>
<p>The full equation gets complex, but that's okay—K-maps and synthesis tools handle it.</p>
<div class="admonition tip">
<p class="admonition-title">Let the Tools Help</p>
<p>For FSMs with more than 4-5 states and multiple inputs, manually deriving equations is error-prone. Use truth tables, K-maps, or (best of all) Verilog with synthesis tools. The concepts matter; the arithmetic can be automated.</p>
</div>
<h2 id="putting-it-all-together-the-design-flow-in-action">Putting It All Together: The Design Flow in Action</h2>
<p>Let's walk through a complete design example from start to finish.</p>
<h3 id="problem-garage-door-controller">Problem: Garage Door Controller</h3>
<p>Design an FSM for a garage door controller:</p>
<ul>
<li>Inputs:</li>
<li>BTN: Button pressed (1 = pressed this cycle)</li>
<li>TOP: Door reached top limit sensor</li>
<li>BOT: Door reached bottom limit sensor</li>
<li>Outputs:</li>
<li>MOTOR_UP: Run motor to raise door</li>
<li>MOTOR_DOWN: Run motor to lower door</li>
<li>Behavior:</li>
<li>Door starts closed (at bottom)</li>
<li>Press button once: door opens until TOP sensor</li>
<li>Press button while opening: door stops</li>
<li>Press button when stopped (middle): door closes</li>
<li>Press button while closing: door stops</li>
<li>Press button when stopped (middle): door opens</li>
<li>Press button when fully open: door closes</li>
</ul>
<h3 id="step-1-define-states">Step 1: Define States</h3>
<p>What must the system remember?</p>
<ul>
<li>Is the door moving? Which direction?</li>
<li>Is the door stopped? Where was it going before it stopped?</li>
<li>Is the door fully open or closed?</li>
</ul>
<p><strong>States:</strong></p>
<ul>
<li>CLOSED: Door at bottom, not moving</li>
<li>OPENING: Door moving up</li>
<li>OPEN: Door at top, not moving</li>
<li>CLOSING: Door moving down</li>
<li>STOPPED_GOING_UP: Stopped mid-travel, was opening</li>
<li>STOPPED_GOING_DOWN: Stopped mid-travel, was closing</li>
</ul>
<h3 id="step-2-state-diagram">Step 2: State Diagram</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code>                     ┌──────────────────────────────────────┐
                     │                BTN                   │
                     ▼                                      │
              ┌────────────┐                         ┌──────┴─────┐
              │   CLOSED   │────────BTN─────────────▶│  OPENING   │
              │ Motor=OFF  │                         │ Motor=UP   │
              └────────────┘                         └────────────┘
                     ▲                                     │  │
                     │                               TOP   │  │ BTN
                     │                                     ▼  ▼
              ┌──────┴─────┐                         ┌────────────┐
              │  CLOSING   │◀────────BTN─────────────│    OPEN    │
              │ Motor=DOWN │                         │ Motor=OFF  │
              └────────────┘                         └────────────┘
                │    │                                     ▲
            BOT │    │ BTN                                 │
                ▼    ▼                                     │
           ┌────────────┐         BTN              ┌───────┴────┐
           │   CLOSED   │◀─────────────────────────│STOPPED_DOWN│
           │            │                          │ Motor=OFF  │
           └────────────┘                          └────────────┘
                                                          ▲
                                                          │ BTN
                                                   ┌──────┴─────┐
                                                   │STOPPED_UP  │
                                                   │ Motor=OFF  │
                                                   └────────────┘
</code></pre></div></td></tr></table></div>
<p>(This diagram is simplified; the complete version includes all transitions.)</p>
<h3 id="step-3-complete-state-table">Step 3: Complete State Table</h3>
<table>
<thead>
<tr>
<th>State</th>
<th>BTN</th>
<th>TOP</th>
<th>BOT</th>
<th>Next State</th>
<th>MOTOR</th>
</tr>
</thead>
<tbody>
<tr>
<td>CLOSED</td>
<td>0</td>
<td>X</td>
<td>X</td>
<td>CLOSED</td>
<td>OFF</td>
</tr>
<tr>
<td>CLOSED</td>
<td>1</td>
<td>X</td>
<td>X</td>
<td>OPENING</td>
<td>UP</td>
</tr>
<tr>
<td>OPENING</td>
<td>0</td>
<td>0</td>
<td>X</td>
<td>OPENING</td>
<td>UP</td>
</tr>
<tr>
<td>OPENING</td>
<td>0</td>
<td>1</td>
<td>X</td>
<td>OPEN</td>
<td>OFF</td>
</tr>
<tr>
<td>OPENING</td>
<td>1</td>
<td>X</td>
<td>X</td>
<td>STOPPED_UP</td>
<td>OFF</td>
</tr>
<tr>
<td>OPEN</td>
<td>0</td>
<td>X</td>
<td>X</td>
<td>OPEN</td>
<td>OFF</td>
</tr>
<tr>
<td>OPEN</td>
<td>1</td>
<td>X</td>
<td>X</td>
<td>CLOSING</td>
<td>DOWN</td>
</tr>
<tr>
<td>CLOSING</td>
<td>0</td>
<td>X</td>
<td>0</td>
<td>CLOSING</td>
<td>DOWN</td>
</tr>
<tr>
<td>CLOSING</td>
<td>0</td>
<td>X</td>
<td>1</td>
<td>CLOSED</td>
<td>OFF</td>
</tr>
<tr>
<td>CLOSING</td>
<td>1</td>
<td>X</td>
<td>X</td>
<td>STOPPED_DOWN</td>
<td>OFF</td>
</tr>
<tr>
<td>STOPPED_UP</td>
<td>0</td>
<td>X</td>
<td>X</td>
<td>STOPPED_UP</td>
<td>OFF</td>
</tr>
<tr>
<td>STOPPED_UP</td>
<td>1</td>
<td>X</td>
<td>X</td>
<td>CLOSING</td>
<td>DOWN</td>
</tr>
<tr>
<td>STOPPED_DOWN</td>
<td>0</td>
<td>X</td>
<td>X</td>
<td>STOPPED_DOWN</td>
<td>OFF</td>
</tr>
<tr>
<td>STOPPED_DOWN</td>
<td>1</td>
<td>X</td>
<td>X</td>
<td>OPENING</td>
<td>UP</td>
</tr>
</tbody>
</table>
<h3 id="step-4-choose-encoding">Step 4: Choose Encoding</h3>
<p>6 states → need 3 flip-flops (minimum). Using binary:</p>
<table>
<thead>
<tr>
<th>State</th>
<th>Q2 Q1 Q0</th>
</tr>
</thead>
<tbody>
<tr>
<td>CLOSED</td>
<td>000</td>
</tr>
<tr>
<td>OPENING</td>
<td>001</td>
</tr>
<tr>
<td>OPEN</td>
<td>010</td>
</tr>
<tr>
<td>CLOSING</td>
<td>011</td>
</tr>
<tr>
<td>STOPPED_UP</td>
<td>100</td>
</tr>
<tr>
<td>STOPPED_DOWN</td>
<td>101</td>
</tr>
</tbody>
</table>
<h3 id="step-5-derive-equations">Step 5: Derive Equations</h3>
<p>From the state table:</p>
<p><strong>MOTOR_UP</strong> (when in OPENING):</p>
<div class="arithmatex">\[MOTOR\_UP = \overline{Q_2} \cdot \overline{Q_1} \cdot Q_0\]</div>
<p><strong>MOTOR_DOWN</strong> (when in CLOSING):</p>
<div class="arithmatex">\[MOTOR\_DOWN = \overline{Q_2} \cdot Q_1 \cdot Q_0\]</div>
<p>The next-state equations would follow similarly, using K-maps to minimize.</p>
<h3 id="step-6-implementation">Step 6: Implementation</h3>
<p>The circuit consists of:</p>
<ul>
<li>3 D flip-flops for state storage</li>
<li>Combinational logic for next-state (inputs: Q2, Q1, Q0, BTN, TOP, BOT)</li>
<li>Combinational logic for outputs (inputs: Q2, Q1, Q0)</li>
<li>Reset logic to initialize to CLOSED (000)</li>
</ul>
<h3 id="step-7-verify">Step 7: Verify</h3>
<p>Test vectors should include:</p>
<ul>
<li>Normal operation: closed → open → closed</li>
<li>Stop and reverse: start opening, stop, then close</li>
<li>Limit switch behavior: motor stops at limits</li>
<li>Multiple button presses in sequence</li>
<li>Button press at each state</li>
</ul>
<div class="admonition success">
<p class="admonition-title">Design Complete!</p>
<p>We've taken a word problem (garage door controller) through the entire FSM design process to equations ready for implementation. This same process works for any FSM—simple or complex.</p>
</div>
<h2 id="common-design-patterns-and-tips">Common Design Patterns and Tips</h2>
<p>Here are some patterns you'll see repeatedly in FSM design:</p>
<h3 id="the-debounce-fsm">The Debounce FSM</h3>
<p>Mechanical buttons "bounce"—rapidly switching between on and off when pressed. An FSM can filter this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>IDLE ──(btn=1)──▶ MAYBE_1 ──(btn=1)──▶ MAYBE_2 ──(btn=1)──▶ PRESSED
         ▲                    │                    │
         └─────(btn=0)────────┴────────────────────┘
</code></pre></div></td></tr></table></div>
<p>Only after seeing button=1 for 3+ consecutive cycles do we register a press. Random bounces reset to IDLE.</p>
<h3 id="the-handshake-fsm">The Handshake FSM</h3>
<p>For coordinating between systems with request/acknowledge:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>IDLE ──(req)──▶ ACTIVE ──(ack)──▶ WAIT ──(~req)──▶ IDLE
</code></pre></div></td></tr></table></div>
<p>The FSM ensures proper sequencing: request must come before acknowledge, and request must drop before the next transaction.</p>
<h3 id="the-watchdog-fsm">The Watchdog FSM</h3>
<p>Monitors for timeouts or hung conditions:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>NORMAL ──(no_activity)──▶ WARNING ──(timeout)──▶ RESET
    ▲                         │
    └────(activity)───────────┘
</code></pre></div></td></tr></table></div>
<p>If there's activity, stay normal. If no activity for too long, issue a warning, then reset the system.</p>
<h3 id="tips-for-clean-fsm-design">Tips for Clean FSM Design</h3>
<ol>
<li>
<p><strong>Name states clearly</strong>: Use descriptive names (WAIT_FOR_ACK not S3)</p>
</li>
<li>
<p><strong>Start with the happy path</strong>: Design the normal operation first, then add error handling</p>
</li>
<li>
<p><strong>Don't forget reset</strong>: Every FSM needs a well-defined initial state</p>
</li>
<li>
<p><strong>Check for dead ends</strong>: Ensure every state has an exit path</p>
</li>
<li>
<p><strong>Verify completeness</strong>: Every state × input combination must be defined</p>
</li>
<li>
<p><strong>Keep it simple</strong>: If you have more than 10-15 states, consider hierarchical FSMs</p>
</li>
<li>
<p><strong>Document the FSM</strong>: State diagrams are great documentation—keep them updated!</p>
</li>
</ol>
<h2 id="summary-and-key-takeaways">Summary and Key Takeaways</h2>
<p>Congratulations—you now have the complete toolkit for designing finite state machines from concept to implementation!</p>
<p><strong>Equations Are Just Combinational Logic:</strong></p>
<ul>
<li>Next-state equations compute D flip-flop inputs</li>
<li>Output equations compute FSM outputs</li>
<li>Both use standard Boolean minimization techniques</li>
</ul>
<p><strong>The Design Process Is Systematic:</strong></p>
<ol>
<li>Understand the specification</li>
<li>Define states and draw the state diagram</li>
<li>Create a complete state table</li>
<li>Choose encoding and derive equations</li>
<li>Implement and verify</li>
</ol>
<p><strong>Sequence Detectors Are Everywhere:</strong></p>
<ul>
<li>Track partial pattern matches as states</li>
<li>Choose overlapping or non-overlapping based on application</li>
<li>Pattern FSMs extend to complex multi-pattern recognition</li>
</ul>
<p><strong>Classic Examples Teach Universal Patterns:</strong></p>
<ul>
<li>Traffic lights: Safety-critical timing with phase sequences</li>
<li>Vending machines: Cumulative inputs leading to actions</li>
<li>Garage doors: User interface with stop/reverse logic</li>
</ul>
<p><strong>Verification Is Essential:</strong></p>
<ul>
<li>Test every transition, not just every state</li>
<li>Check edge cases and error conditions</li>
<li>For critical systems, consider formal verification</li>
</ul>
<p>The FSMs you've learned to design are the building blocks of all complex digital systems. The controller in your phone, the protocol handlers in your network interface, the timing logic in your display—all FSMs. Master these fundamentals, and you have the tools to design any sequential digital system.</p>
<details>
<summary>Graphic Novel Suggestion</summary>
<p>An engaging graphic novel could follow a team of engineers designing the controller for a Mars rover, where every FSM must be perfect because there's no "oops, let me fix that" when you're 140 million miles from the nearest repair shop. The narrative could show how they used formal verification to prove that the rover's movement FSM would never allow driving while the drill was deployed, how they tested every transition through simulation, and the tense moment when a real mission anomaly was traced to an FSM they'd verified but implemented with a subtle encoding bug. The lesson: FSMs are powerful, but verification is everything.</p>
</details>
<h2 id="practice-problems">Practice Problems</h2>
<p>Test your mastery of FSM design with these exercises:</p>
<details class="question">
<summary>Problem 1: Derive Next-State Equations</summary>
<p>Given this state table for a 2-state, 1-input FSM:</p>
<table>
<thead>
<tr>
<th>Q</th>
<th>X</th>
<th>Q+</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>Derive the next-state equation for D.</p>
<p><strong>Solution:</strong>
Looking at when Q+ = 1:
- Q=0, X=1
- Q=1, X=0</p>
<p>These are the two cases where Q and X differ, so:</p>
<div class="arithmatex">\[D = Q \oplus X = \overline{Q} \cdot X + Q \cdot \overline{X}\]</div>
<p>This is XOR—the FSM toggles when X=1.</p>
</details>
<details class="question">
<summary>Problem 2: Overlapping vs Non-Overlapping</summary>
<p>For the pattern "101", how many times would each detector type output 1 for input "10101"?</p>
<p><strong>Solution:</strong></p>
<p><strong>Non-overlapping:</strong>
- 101 found at positions 0-2, output 1
- Reset, look for new pattern starting at position 3
- Only "01" remaining, no complete pattern
- <strong>Total: 1 detection</strong></p>
<p><strong>Overlapping:</strong>
- 101 found at positions 0-2, output 1
- The "01" is reused as start of new pattern
- 101 found at positions 2-4, output 1
- <strong>Total: 2 detections</strong></p>
</details>
<details class="question">
<summary>Problem 3: Traffic Light Safety</summary>
<p>Prove that the traffic light controller from this chapter never has both directions green simultaneously.</p>
<p><strong>Solution:</strong>
Examining each state:
- NS_GREEN: NS=Green, EW=Red ✓
- NS_YELLOW: NS=Yellow, EW=Red ✓
- EW_GREEN: NS=Red, EW=Green ✓
- EW_YELLOW: NS=Red, EW=Yellow ✓</p>
<p>In every state, at least one direction is Red or Yellow. There is no state where both are Green. Therefore, the FSM is safe by design.</p>
<p>The key is that we have 4 distinct states, each with a fixed output assignment, and we verified all 4.</p>
</details>
<details class="question">
<summary>Problem 4: Vending Machine Change</summary>
<p>In the vending machine FSM, what change should be returned if a quarter is inserted when the machine is in state S15 (15¢ accumulated)?</p>
<p><strong>Solution:</strong>
S15 + Quarter = 15¢ + 25¢ = 40¢</p>
<p>Product costs 25¢, so:
- Dispense product (25¢ value given)
- Return 40¢ - 25¢ = 15¢ in change</p>
<p>15¢ = 10¢ + 5¢, so:
- CHANGE_10 = 1 (return a dime)
- CHANGE_5 = 1 (return a nickel)</p>
</details>
<details class="question">
<summary>Problem 5: Complete FSM Design</summary>
<p>Design an FSM that outputs 1 for exactly one clock cycle after seeing the input sequence "110". Use overlapping detection.</p>
<p><strong>Solution:</strong></p>
<p><strong>States:</strong>
- S0: Initial/haven't matched anything useful
- S1: Saw "1"
- S2: Saw "11"
- S3: Saw "110" → output 1</p>
<p><strong>State Table (overlapping):</strong></p>
<table>
<thead>
<tr>
<th>State</th>
<th>Input X</th>
<th>Next State</th>
<th>Output Z</th>
</tr>
</thead>
<tbody>
<tr>
<td>S0</td>
<td>0</td>
<td>S0</td>
<td>0</td>
</tr>
<tr>
<td>S0</td>
<td>1</td>
<td>S1</td>
<td>0</td>
</tr>
<tr>
<td>S1</td>
<td>0</td>
<td>S0</td>
<td>0</td>
</tr>
<tr>
<td>S1</td>
<td>1</td>
<td>S2</td>
<td>0</td>
</tr>
<tr>
<td>S2</td>
<td>0</td>
<td>S3</td>
<td>0</td>
</tr>
<tr>
<td>S2</td>
<td>1</td>
<td>S2</td>
<td>0</td>
</tr>
<tr>
<td>S3</td>
<td>0</td>
<td>S0</td>
<td>1</td>
</tr>
<tr>
<td>S3</td>
<td>1</td>
<td>S1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Note: In S3, we output 1. For overlapping:
- If X=1 after "110", the new "1" could start another "110", so go to S1
- If X=0 after "110", reset to S0 (the "0" can't help start "110")</p>
<p><strong>Encoding (Q1 Q0):</strong> S0=00, S1=01, S2=10, S3=11</p>
<p><strong>Next-state equations:</strong></p>
<div class="arithmatex">\[Q_1^+ = Q_0 \cdot X + Q_1 \cdot \overline{X}\]</div>
<div class="arithmatex">\[Q_0^+ = \overline{Q_1} \cdot X + Q_1 \cdot Q_0 \cdot X\]</div>
<p><strong>Output equation (Moore):</strong></p>
<div class="arithmatex">\[Z = Q_1 \cdot Q_0\]</div>
</details>
<details class="question">
<summary>Problem 6: Design Challenge</summary>
<p>Design an FSM for a combination lock with the sequence 1-2-1 (three inputs: buttons 0, 1, 2). Output UNLOCK=1 when correct sequence entered. Include a wrong-input reset.</p>
<p><strong>Solution Sketch:</strong></p>
<p><strong>States:</strong>
- LOCKED: Waiting for first correct input
- SAW_1: First "1" received correctly
- SAW_12: Sequence "1-2" received correctly
- UNLOCKED: Full sequence "1-2-1" received</p>
<p><strong>Transitions:</strong>
- LOCKED: button 1 → SAW_1; button 0 or 2 → LOCKED
- SAW_1: button 2 → SAW_12; button 0 or 1 → LOCKED
- SAW_12: button 1 → UNLOCKED; button 0 or 2 → LOCKED
- UNLOCKED: any button → LOCKED (auto-relock)</p>
<p>This gives a 4-state FSM with 2 flip-flops. The wrong-input reset is handled by transitions back to LOCKED from any intermediate state.</p>
</details>
<p><a href="references/">See Annotated References</a></p>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../09-fsm-fundamentals/references/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Annotated References">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Annotated References
              </div>
            </div>
          </a>
        
        
          
          <a href="quiz/" class="md-footer__link md-footer__link--next" aria-label="Next: Quiz">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Quiz
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2026 Dan McCreary. Licensed under <a href="license/">CC BY-NC-SA 4.0</a> for non-commercial use.
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.expand", "navigation.path", "navigation.prune", "navigation.indexes", "toc.follow", "navigation.top", "navigation.footer"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../js/extra.js"></script>
      
        <script src="../../js/katex.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>