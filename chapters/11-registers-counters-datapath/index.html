
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Sequential building blocks that form the foundation of digital datapath design">
      
      
        <meta name="author" content="Dan McCreary">
      
      
        <link rel="canonical" href="https://dmccreary.github.io/digital-electronics/chapters/11-registers-counters-datapath/">
      
      
        <link rel="prev" href="../10-fsm-design-applications/quiz/">
      
      
        <link rel="next" href="quiz/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.43">
    
    
      
        <title>Registers, Counters, and Datapath - Digital Electronics</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#registers-counters-and-datapath" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Digital Electronics" class="md-header__button md-logo" aria-label="Digital Electronics" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Digital Electronics
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Registers, Counters, and Datapath
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dmccreary/digital-electronics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub Repo
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Digital Electronics" class="md-nav__button md-logo" aria-label="Digital Electronics" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Digital Electronics
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dmccreary/digital-electronics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub Repo
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course-description/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Course Description
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Chapters
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Chapters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../01-number-systems-binary-arithmetic/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    1. Number Systems
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../02-boolean-algebra-fundamentals/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    2. Boolean Algebra
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../03-logic-gates-digital-signals/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    3. Logic Gates
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../04-combinational-logic-design/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    4. Combinational Design
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../05-logic-minimization-kmaps/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    5. K-Maps
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../06-combinational-building-blocks/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    6. Building Blocks
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../07-intro-sequential-logic/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    7. Sequential Logic
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../08-flip-flops-timing/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    8. Flip-Flops
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../09-fsm-fundamentals/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    9. FSM Fundamentals
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../10-fsm-design-applications/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    10. FSM Applications
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_12" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  <span class="md-ellipsis">
    11. Registers & Counters
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_4_12" id="__nav_4_12_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_12_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_12">
            <span class="md-nav__icon md-icon"></span>
            11. Registers & Counters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="quiz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quiz
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../12-verilog-hdl-fundamentals/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    12. Verilog Basics
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../13-verilog-modeling/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    13. Verilog Modeling
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../14-testbenches-simulation/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    14. Testbenches
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../15-fpga-lab-skills/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    15. FPGA & Lab
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../lessons/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Lessons
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../sims/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Sims
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../learning-graph/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Learning Graph
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../prompts/equation-standards/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Prompts
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-we-built-this-site/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How we built this site
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concepts-covered" class="md-nav__link">
    <span class="md-ellipsis">
      Concepts Covered
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction-building-blocks-that-remember-and-count" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction: Building Blocks That Remember and Count
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registers-your-circuits-notebook" class="md-nav__link">
    <span class="md-ellipsis">
      Registers: Your Circuit's Notebook
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Registers: Your Circuit's Notebook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-a-register" class="md-nav__link">
    <span class="md-ellipsis">
      What is a Register?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-signals-enable-load-and-clear" class="md-nav__link">
    <span class="md-ellipsis">
      Control Signals: Enable, Load, and Clear
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Control Signals: Enable, Load, and Clear">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-signal" class="md-nav__link">
    <span class="md-ellipsis">
      Enable Signal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-signal" class="md-nav__link">
    <span class="md-ellipsis">
      Load Signal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-signal" class="md-nav__link">
    <span class="md-ellipsis">
      Clear Signal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-register-control-signals" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Register Control Signals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-load-register" class="md-nav__link">
    <span class="md-ellipsis">
      Parallel Load Register
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shift-registers-data-on-the-move" class="md-nav__link">
    <span class="md-ellipsis">
      Shift Registers: Data on the Move
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Shift Registers: Data on the Move">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-four-flavors-of-shift-registers" class="md-nav__link">
    <span class="md-ellipsis">
      The Four Flavors of Shift Registers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Four Flavors of Shift Registers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serial-in-serial-out-siso" class="md-nav__link">
    <span class="md-ellipsis">
      Serial In Serial Out (SISO)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-in-parallel-out-sipo" class="md-nav__link">
    <span class="md-ellipsis">
      Serial In Parallel Out (SIPO)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-in-serial-out-piso" class="md-nav__link">
    <span class="md-ellipsis">
      Parallel In Serial Out (PISO)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-in-parallel-out-pipo" class="md-nav__link">
    <span class="md-ellipsis">
      Parallel In Parallel Out (PIPO)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-shift-register-modes-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Shift Register Modes Comparison
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bidirectional-shift" class="md-nav__link">
    <span class="md-ellipsis">
      Bidirectional Shift
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#universal-shift-register" class="md-nav__link">
    <span class="md-ellipsis">
      Universal Shift Register
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Universal Shift Register">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-universal-shift-register" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Universal Shift Register
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#counters-circuits-that-count" class="md-nav__link">
    <span class="md-ellipsis">
      Counters: Circuits That Count
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Counters: Circuits That Count">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-a-counter" class="md-nav__link">
    <span class="md-ellipsis">
      What is a Counter?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary-counter" class="md-nav__link">
    <span class="md-ellipsis">
      Binary Counter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#up-counter" class="md-nav__link">
    <span class="md-ellipsis">
      Up Counter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#down-counter" class="md-nav__link">
    <span class="md-ellipsis">
      Down Counter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#up-down-counter" class="md-nav__link">
    <span class="md-ellipsis">
      Up-Down Counter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Up-Down Counter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-up-down-counter" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Up-Down Counter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#counter-state-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Counter State Diagram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#counter-overflow" class="md-nav__link">
    <span class="md-ellipsis">
      Counter Overflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mod-n-counter" class="md-nav__link">
    <span class="md-ellipsis">
      Mod-N Counter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bcd-counter-and-decade-counter" class="md-nav__link">
    <span class="md-ellipsis">
      BCD Counter and Decade Counter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BCD Counter and Decade Counter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-bcd-decade-counter" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: BCD Decade Counter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ring-counter" class="md-nav__link">
    <span class="md-ellipsis">
      Ring Counter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#johnson-counter" class="md-nav__link">
    <span class="md-ellipsis">
      Johnson Counter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Johnson Counter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-ring-vs-johnson-counter-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Ring vs Johnson Counter Comparison
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#register-files-organized-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Register Files: Organized Storage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Register Files: Organized Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-register-file" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Register File
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-datapath-where-computation-happens" class="md-nav__link">
    <span class="md-ellipsis">
      The Datapath: Where Computation Happens
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Datapath: Where Computation Happens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#datapath-concept" class="md-nav__link">
    <span class="md-ellipsis">
      Datapath Concept
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-unit" class="md-nav__link">
    <span class="md-ellipsis">
      Control Unit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Control Unit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-datapath-with-control-unit" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: Datapath with Control Unit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#register-transfer-level-rtl" class="md-nav__link">
    <span class="md-ellipsis">
      Register Transfer Level (RTL)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Register Transfer Level (RTL)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-rtl" class="md-nav__link">
    <span class="md-ellipsis">
      What is RTL?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rtl-notation" class="md-nav__link">
    <span class="md-ellipsis">
      RTL Notation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RTL Notation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-rtl-operations-visualizer" class="md-nav__link">
    <span class="md-ellipsis">
      Diagram: RTL Operations Visualizer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rtl-design-flow" class="md-nav__link">
    <span class="md-ellipsis">
      RTL Design Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#putting-it-all-together-a-simple-cpu-datapath" class="md-nav__link">
    <span class="md-ellipsis">
      Putting It All Together: A Simple CPU Datapath
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-and-key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Summary and Key Takeaways
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practice-problems" class="md-nav__link">
    <span class="md-ellipsis">
      Practice Problems
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="registers-counters-and-datapath">Registers, Counters, and Datapath</h1>
<h2 id="summary">Summary</h2>
<p>This chapter covers the sequential building blocks that form the foundation of digital datapath design. Students will learn about registers including parallel load and shift registers with various configurations (SISO, SIPO, PISO, PIPO), bidirectional and universal shift registers, and control signals for enable, load, and clear operations. Counter design is thoroughly covered including up, down, and up-down counters, mod-N counters, BCD and decade counters, and specialized counters like ring and Johnson counters. The chapter concludes with datapath concepts, control units, and register transfer level (RTL) abstraction.</p>
<h2 id="concepts-covered">Concepts Covered</h2>
<p>This chapter covers the following 29 concepts from the learning graph:</p>
<ol>
<li>Counter</li>
<li>Up Counter</li>
<li>Down Counter</li>
<li>Up-Down Counter</li>
<li>Mod-N Counter</li>
<li>Binary Counter</li>
<li>BCD Counter</li>
<li>Decade Counter</li>
<li>Ring Counter</li>
<li>Johnson Counter</li>
<li>Counter State Diagram</li>
<li>Counter Overflow</li>
<li>Register</li>
<li>Parallel Load Register</li>
<li>Shift Register</li>
<li>Serial In Serial Out</li>
<li>Serial In Parallel Out</li>
<li>Parallel In Serial Out</li>
<li>Parallel In Parallel Out</li>
<li>Bidirectional Shift</li>
<li>Universal Shift Register</li>
<li>Enable Signal</li>
<li>Load Signal</li>
<li>Clear Signal</li>
<li>Register File</li>
<li>Datapath Concept</li>
<li>Control Unit</li>
<li>Register Transfer Level</li>
<li>RTL Notation</li>
</ol>
<h2 id="prerequisites">Prerequisites</h2>
<p>This chapter builds on concepts from:</p>
<ul>
<li><a href="../08-flip-flops-timing/">Chapter 8: Flip-Flops and Timing</a></li>
<li><a href="../09-fsm-fundamentals/">Chapter 9: Finite State Machine Fundamentals</a></li>
</ul>
<hr />
<h2 id="introduction-building-blocks-that-remember-and-count">Introduction: Building Blocks That Remember and Count</h2>
<p>Welcome to the chapter where flip-flops graduate from being solo performers to joining an orchestra! You've mastered individual flip-flops—those tiny one-bit memory cells that hold either a 0 or a 1. Now it's time to see what happens when you gang them together to create <em>registers</em> (memory units that remember entire words) and <em>counters</em> (circuits that can count events).</p>
<p>Think of a flip-flop as a single Post-It note that can remember one bit. A register is like a whole notebook—you can store eight bits, sixteen bits, or even more. A counter is like a mechanical tally counter at the door of a concert venue: click, click, click, keeping track of how many people entered.</p>
<p>But here's where it gets really exciting: registers and counters are the bread and butter of <em>datapath design</em>. The datapath is the part of a processor that actually moves and manipulates data—adding numbers, shifting bits, storing intermediate results. If the CPU were a kitchen, the datapath would be the prep station, cutting board, and mixing bowls where all the actual cooking happens.</p>
<p>By the end of this chapter, you'll understand how registers hold data, how counters sequence through states, and how the datapath ties it all together with a control unit calling the shots. You're building the foundation for understanding how computers actually compute!</p>
<p>Ready to start counting? Let's shift into high gear!</p>
<h2 id="registers-your-circuits-notebook">Registers: Your Circuit's Notebook</h2>
<h3 id="what-is-a-register">What is a Register?</h3>
<p>A <strong>Register</strong> is a group of flip-flops that work together to store multiple bits of data as a single unit. While a single D flip-flop stores one bit, a register stores an entire binary word—typically 4, 8, 16, 32, or 64 bits wide.</p>
<p>Registers are fundamental building blocks in digital systems. Every piece of data your computer manipulates—from the characters you type to the pixels on your screen—passes through registers at some point.</p>
<p>Key characteristics of registers:</p>
<ul>
<li><strong>Parallel storage</strong>: All flip-flops in the register share the same clock signal</li>
<li><strong>Word-oriented</strong>: The register stores and retrieves an entire word at once (or can shift data serially)</li>
<li><strong>Controlled access</strong>: Enable, load, and clear signals determine when and how data moves</li>
</ul>
<p>Here's what an 8-bit register looks like conceptually:</p>
<table>
<thead>
<tr>
<th>Bit Position</th>
<th>D₇</th>
<th>D₆</th>
<th>D₅</th>
<th>D₄</th>
<th>D₃</th>
<th>D₂</th>
<th>D₁</th>
<th>D₀</th>
</tr>
</thead>
<tbody>
<tr>
<td>Flip-flop</td>
<td>FF₇</td>
<td>FF₆</td>
<td>FF₅</td>
<td>FF₄</td>
<td>FF₃</td>
<td>FF₂</td>
<td>FF₁</td>
<td>FF₀</td>
</tr>
<tr>
<td>Output</td>
<td>Q₇</td>
<td>Q₆</td>
<td>Q₅</td>
<td>Q₄</td>
<td>Q₃</td>
<td>Q₂</td>
<td>Q₁</td>
<td>Q₀</td>
</tr>
</tbody>
</table>
<p>When the clock edge arrives (and the register is enabled), all eight flip-flops simultaneously capture their respective input bits. The stored word is available at the Q outputs until the next load operation.</p>
<div class="admonition tip">
<p class="admonition-title">Registers vs. Memory</p>
<p>Registers and RAM both store data, but they serve different purposes. Registers are fast, expensive, and directly connected to the datapath—there are typically only a handful in a CPU. RAM is slower, cheaper per bit, and stores much more data. Think of registers as the items on your desk (immediately accessible) versus RAM as books on your bookshelf (requires walking over to retrieve).</p>
</div>
<h3 id="control-signals-enable-load-and-clear">Control Signals: Enable, Load, and Clear</h3>
<p>Registers don't just blindly capture data on every clock edge. They have control signals that determine their behavior:</p>
<h4 id="enable-signal">Enable Signal</h4>
<p>The <strong>Enable Signal</strong> (sometimes called Clock Enable, CE, or EN) controls whether the register responds to the clock. When enable is inactive, the register ignores clock edges and retains its current value—like putting the register on pause.</p>
<div class="arithmatex">\[Q^+ = \begin{cases} D &amp; \text{if } EN = 1 \\ Q &amp; \text{if } EN = 0 \end{cases}\]</div>
<p>Enable is useful when:</p>
<ul>
<li>Multiple registers share a clock but should update at different times</li>
<li>The register should hold its value while other processing occurs</li>
<li>Power savings are needed (disabled flip-flops don't switch)</li>
</ul>
<h4 id="load-signal">Load Signal</h4>
<p>The <strong>Load Signal</strong> (sometimes called LD or LOAD) tells the register to capture new data from its inputs. This is often combined with enable functionality.</p>
<p>In some designs, load and enable are the same signal. In others, they're separate: enable might gate the clock while load selects between keeping the current value versus accepting new input.</p>
<p>A register with both enable and load might work like this:</p>
<table>
<thead>
<tr>
<th>EN</th>
<th>LOAD</th>
<th>Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>X</td>
<td>Hold (ignore clock)</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>Hold (clock active, no load)</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>Load new data</td>
</tr>
</tbody>
</table>
<h4 id="clear-signal">Clear Signal</h4>
<p>The <strong>Clear Signal</strong> (sometimes called CLR, RST, or RESET) forces all flip-flops in the register to 0, regardless of the data inputs. Clear can be:</p>
<ul>
<li><strong>Asynchronous</strong>: Happens immediately when clear is asserted, ignoring the clock</li>
<li><strong>Synchronous</strong>: Happens on the next clock edge when clear is asserted</li>
</ul>
<p>Asynchronous clear is essential for system reset—you need to establish a known state when power is applied. Synchronous clear is safer for normal operation since it avoids timing hazards.</p>
<div class="arithmatex">\[Q^+ = \begin{cases} 0 &amp; \text{if } CLR = 1 \\ D &amp; \text{if } CLR = 0 \text{ and } LOAD = 1 \\ Q &amp; \text{otherwise} \end{cases}\]</div>
<h4 id="diagram-register-control-signals">Diagram: Register Control Signals</h4>
<iframe src="../../sims/register-control-signals/main.html" width="100%" height="500px" scrolling="no"></iframe>

<details>
<summary>Register Control Signals Interactive</summary>
<p>Type: microsim</p>
<p>Bloom Level: Apply (L3)
Bloom Verb: Use</p>
<p>Learning Objective: Students will be able to use enable, load, and clear signals to control when and how a register stores data, predicting the register's behavior for different signal combinations.</p>
<p>Instructional Rationale: Interactive manipulation of control signals with immediate visual feedback on register contents builds intuition for how these signals interact.</p>
<p>Canvas Layout:</p>
<ul>
<li>Center: 4-bit register with visible flip-flop states</li>
<li>Top: Data input switches (4 bits)</li>
<li>Left: Control signal toggles (Enable, Load, Clear)</li>
<li>Right: Output display showing stored value</li>
<li>Bottom: Clock edge button and timing diagram</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>4 toggle switches for data input (D3-D0)</li>
<li>Enable toggle with indicator</li>
<li>Load toggle with indicator</li>
<li>Clear button (momentary)</li>
<li>Clock edge button to trigger update</li>
<li>Visual representation of flip-flop states</li>
<li>Timing diagram showing signal relationships</li>
<li>Prediction mode: guess output before clicking clock</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Current data input value (binary and hex)</li>
<li>Current register contents (binary and hex)</li>
<li>Control signal states</li>
<li>What will happen on next clock edge</li>
<li>Timing diagram showing history</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Register shown as connected flip-flops</li>
<li>Control signals as labeled input lines</li>
<li>Data flows visualized with arrows</li>
<li>Clear changes shown immediately vs synchronized</li>
<li>Color: green=enabled, red=disabled, blue=data</li>
</ul>
<p>Implementation: p5.js with register simulation and timing diagram</p>
</details>
<h3 id="parallel-load-register">Parallel Load Register</h3>
<p>A <strong>Parallel Load Register</strong> accepts all input bits simultaneously (in parallel) on a clock edge. This is the most common type of register, used when you need to store a complete word of data at once.</p>
<p>The key feature is that all bits are loaded at the same instant—there's no sequential bit-by-bit transfer. When the load signal is active and the clock edge arrives, every flip-flop captures its corresponding input.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>           ┌─────────────────────────────────────┐
           │         4-bit Parallel Load         │
D3 ────────┤─────►[D Q]─────────────────────────►│──── Q3
D2 ────────┤─────►[D Q]─────────────────────────►│──── Q2
D1 ────────┤─────►[D Q]─────────────────────────►│──── Q1
D0 ────────┤─────►[D Q]─────────────────────────►│──── Q0
           │          ▲     ▲     ▲              │
LOAD ──────┤──────────┘     │     │              │
CLR ───────┤────────────────┘     │              │
CLK ───────┤──────────────────────┘              │
           └─────────────────────────────────────┘
</code></pre></div></td></tr></table></div>
<p>The behavior is straightforward:</p>
<table>
<thead>
<tr>
<th>CLR</th>
<th>LOAD</th>
<th>Clock</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>X</td>
<td>↑</td>
<td>Q ← 0000 (synchronous clear)</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>↑</td>
<td>Q ← D (load data)</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>↑</td>
<td>Q ← Q (hold)</td>
</tr>
</tbody>
</table>
<p>In Verilog, a 4-bit parallel load register is elegantly simple:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">module</span><span class="w"> </span><span class="n">parallel_load_reg</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">clr</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">load</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
<span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span>
<span class="p">);</span>
<span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">clr</span><span class="p">)</span>
<span class="w">            </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">load</span><span class="p">)</span>
<span class="w">            </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
<span class="w">        </span><span class="c1">// else hold current value (implicit)</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">endmodule</span>
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Implicit Hold Behavior</p>
<p>When neither clear nor load is active, the register simply holds its value. In Verilog, this "else hold" behavior is implicit when you don't specify an else clause—the synthesis tool infers that Q should retain its value.</p>
</div>
<h2 id="shift-registers-data-on-the-move">Shift Registers: Data on the Move</h2>
<p>While parallel load registers move data all at once, <strong>Shift Registers</strong> move data one bit at a time, shifting the contents left or right on each clock cycle. This seemingly simple operation enables an incredible range of applications, from serial communication to multiplication and division.</p>
<h3 id="the-four-flavors-of-shift-registers">The Four Flavors of Shift Registers</h3>
<p>Shift registers come in four configurations, depending on how data enters and exits:</p>
<h4 id="serial-in-serial-out-siso">Serial In Serial Out (SISO)</h4>
<p>A <strong>Serial In Serial Out</strong> shift register accepts one bit at a time at one end and outputs one bit at a time at the other end. Data flows through the register like cars in a tunnel—in one end, out the other.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>Serial In → [D₀] → [D₁] → [D₂] → [D₃] → Serial Out
            ↑       ↑       ↑       ↑
            └───────┴───────┴───────┘
                      CLK
</code></pre></div></td></tr></table></div>
<p>SISO registers are used for:</p>
<ul>
<li><strong>Delay lines</strong>: Delay a signal by N clock cycles</li>
<li><strong>Serial transmission</strong>: Send data one bit at a time over a single wire</li>
<li><strong>Circular buffers</strong>: When output is fed back to input</li>
</ul>
<p>The data takes N clock cycles to travel through an N-bit register—perfect when you need a precisely timed delay.</p>
<h4 id="serial-in-parallel-out-sipo">Serial In Parallel Out (SIPO)</h4>
<p>A <strong>Serial In Parallel Out</strong> shift register accepts data one bit at a time but provides access to all stored bits simultaneously as outputs. Data streams in serially, then the complete word is read in parallel.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>                    Q₃    Q₂    Q₁    Q₀
                     ↓     ↓     ↓     ↓
Serial In → [D₀] → [D₁] → [D₂] → [D₃]
                    ↑      ↑      ↑      ↑
                    └──────┴──────┴──────┘
                              CLK
</code></pre></div></td></tr></table></div>
<p>SIPO is essential for:</p>
<ul>
<li><strong>Serial-to-parallel conversion</strong>: Receive serial data (like UART), output parallel word</li>
<li><strong>Data collection</strong>: Gather bits over time, then process all at once</li>
<li><strong>SPI/I2C receivers</strong>: Accept data from serial bus, present as parallel byte</li>
</ul>
<h4 id="parallel-in-serial-out-piso">Parallel In Serial Out (PISO)</h4>
<p>A <strong>Parallel In Serial Out</strong> shift register loads an entire word at once, then shifts it out one bit at a time. This is the opposite of SIPO—data enters in parallel and leaves serially.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>           D₃    D₂    D₁    D₀
            ↓     ↓     ↓     ↓
          [D₀] → [D₁] → [D₂] → [D₃] → Serial Out
            ↑      ↑      ↑      ↑
LOAD ───────┴──────┴──────┴──────┘
CLK ───────────────────────────────
</code></pre></div></td></tr></table></div>
<p>PISO is used for:</p>
<ul>
<li><strong>Parallel-to-serial conversion</strong>: Take parallel word, transmit serially</li>
<li><strong>SPI/UART transmitters</strong>: Load byte to send, shift it out bit by bit</li>
<li><strong>Reducing pin count</strong>: Transmit 8 bits over 1 wire instead of 8</li>
</ul>
<h4 id="parallel-in-parallel-out-pipo">Parallel In Parallel Out (PIPO)</h4>
<p>A <strong>Parallel In Parallel Out</strong> register is essentially the same as our parallel load register—data enters in parallel and exits in parallel. While it can also shift, the primary mode is complete word transfers.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>           D₃    D₂    D₁    D₀
            ↓     ↓     ↓     ↓
          [FF] ─ [FF] ─ [FF] ─ [FF]
            ↓     ↓     ↓     ↓
           Q₃    Q₂    Q₁    Q₀
</code></pre></div></td></tr></table></div>
<p>PIPO with shift capability is essentially a universal shift register (covered soon).</p>
<h4 id="diagram-shift-register-modes-comparison">Diagram: Shift Register Modes Comparison</h4>
<iframe src="../../sims/shift-register-modes/main.html" width="100%" height="550px" scrolling="no"></iframe>

<details>
<summary>Shift Register Modes Interactive</summary>
<p>Type: microsim</p>
<p>Bloom Level: Understand (L2)
Bloom Verb: Compare</p>
<p>Learning Objective: Students will be able to compare SISO, SIPO, PISO, and PIPO shift register modes, explaining how data flows in each configuration and identifying appropriate applications.</p>
<p>Instructional Rationale: Side-by-side visualization of all four modes with animated data flow makes the distinctions clear and memorable.</p>
<p>Canvas Layout:</p>
<ul>
<li>Four columns, one for each mode (SISO, SIPO, PISO, PIPO)</li>
<li>Each shows 4-bit register with input/output paths</li>
<li>Bottom: shared clock control and data input</li>
<li>Top: mode descriptions and use cases</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Mode selector to highlight one mode at a time</li>
<li>Clock edge button to shift data</li>
<li>Serial input bit toggle (for SISO/SIPO)</li>
<li>Parallel input switches (for PISO/PIPO)</li>
<li>Animation showing data movement</li>
<li>Step counter showing clock cycles elapsed</li>
<li>Reset button</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Current register contents in all modes</li>
<li>Input being entered</li>
<li>Output being produced</li>
<li>Clock cycle count</li>
<li>Comparison of how same data appears in each mode</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Consistent register representation across all modes</li>
<li>Data bits as colored boxes moving through register</li>
<li>Arrows showing data flow direction</li>
<li>Highlight input and output paths differently</li>
<li>Animation of bit-by-bit vs parallel transfer</li>
</ul>
<p>Implementation: p5.js with four register simulations and synchronized clock</p>
</details>
<h3 id="bidirectional-shift">Bidirectional Shift</h3>
<p>A <strong>Bidirectional Shift</strong> register can shift data either left or right based on a direction control signal. This flexibility is valuable for arithmetic operations and data manipulation.</p>
<p>Direction control works like this:</p>
<table>
<thead>
<tr>
<th>DIR</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Shift Right: Each bit moves to lower position, new bit enters at MSB</td>
</tr>
<tr>
<td>1</td>
<td>Shift Left: Each bit moves to higher position, new bit enters at LSB</td>
</tr>
</tbody>
</table>
<p>The implementation adds a multiplexer at each flip-flop's input:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>For bit position i:
D[i] = (DIR == 0) ? Q[i+1] : Q[i-1]
</code></pre></div></td></tr></table></div>
<p>On shift right, bit i receives the value from bit i+1 (the bit to its left).
On shift left, bit i receives the value from bit i-1 (the bit to its right).</p>
<div class="admonition tip">
<p class="admonition-title">Arithmetic with Shifts</p>
<p>Shifting left by one position multiplies by 2 (assuming no overflow). Shifting right by one position divides by 2 (with truncation). A bidirectional shift register can implement fast multiply/divide by powers of 2!</p>
<ul>
<li>0101 (5) shift left → 1010 (10)</li>
<li>1100 (12) shift right → 0110 (6)</li>
</ul>
</div>
<h3 id="universal-shift-register">Universal Shift Register</h3>
<p>The <strong>Universal Shift Register</strong> combines all shift register capabilities into one versatile component. It can:</p>
<ul>
<li>Hold (no change)</li>
<li>Load in parallel</li>
<li>Shift left</li>
<li>Shift right</li>
</ul>
<p>This is controlled by a 2-bit mode select input:</p>
<table>
<thead>
<tr>
<th>S₁</th>
<th>S₀</th>
<th>Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>Hold (no change)</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>Shift Right</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>Shift Left</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>Parallel Load</td>
</tr>
</tbody>
</table>
<p>The universal shift register is a workhorse component in datapath design because it handles so many operations with a single piece of hardware.</p>
<h4 id="diagram-universal-shift-register">Diagram: Universal Shift Register</h4>
<iframe src="../../sims/universal-shift-register/main.html" width="100%" height="550px" scrolling="no"></iframe>

<details>
<summary>Universal Shift Register Simulator</summary>
<p>Type: microsim</p>
<p>Bloom Level: Apply (L3)
Bloom Verb: Demonstrate</p>
<p>Learning Objective: Students will be able to demonstrate all four modes of a universal shift register (hold, shift left, shift right, parallel load) by setting mode controls and observing the resulting data transformations.</p>
<p>Instructional Rationale: Interactive control over all modes with immediate visual feedback on register contents builds proficiency with this versatile component.</p>
<p>Canvas Layout:</p>
<ul>
<li>Center: 4-bit register with visible contents</li>
<li>Top: Mode selector (4 options)</li>
<li>Left: Serial inputs (left and right)</li>
<li>Top-Center: Parallel data inputs</li>
<li>Right: Outputs (parallel and serial)</li>
<li>Bottom: Clock control and state history</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Mode selection dropdown or buttons</li>
<li>Parallel input data entry</li>
<li>Serial input left bit toggle</li>
<li>Serial input right bit toggle</li>
<li>Clock edge button</li>
<li>Clear button</li>
<li>History panel showing last 8 states</li>
<li>Mode indicator showing current operation</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Current mode selected</li>
<li>Input values (parallel and serial)</li>
<li>Current register contents</li>
<li>What will happen on next clock edge</li>
<li>Output values</li>
<li>Operation history</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Register as row of connected boxes</li>
<li>Mode selection highlighted</li>
<li>Data flow arrows appropriate for current mode</li>
<li>Serial inputs at left/right ends</li>
<li>Parallel outputs above each cell</li>
<li>Animation for shift and load operations</li>
</ul>
<p>Implementation: p5.js with 74194-style universal shift register simulation</p>
</details>
<p>The 74LS194 is a classic universal shift register IC that implements exactly this functionality. In FPGA and ASIC design, universal shift registers are synthesized from the behavioral description—you write what you want, and the tools figure out the multiplexers and flip-flops.</p>
<h2 id="counters-circuits-that-count">Counters: Circuits That Count</h2>
<p>Now let's turn to circuits that don't just store data—they sequence through values automatically. A <strong>Counter</strong> is a sequential circuit that goes through a predetermined sequence of states on successive clock pulses.</p>
<h3 id="what-is-a-counter">What is a Counter?</h3>
<p>At its core, a counter is an FSM with a simple, regular structure. Instead of arbitrary transitions between states, counters follow a counting sequence—typically incrementing or decrementing by one on each clock cycle.</p>
<p>Counters have applications everywhere:</p>
<ul>
<li><strong>Event counting</strong>: How many button presses? How many pulses from a sensor?</li>
<li><strong>Timing</strong>: Count clock cycles to measure time intervals</li>
<li><strong>Sequencing</strong>: Generate control sequences for state machines</li>
<li><strong>Address generation</strong>: Step through memory addresses</li>
<li><strong>Frequency division</strong>: Clock output toggles at a fraction of input frequency</li>
</ul>
<p>Key counter parameters:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Modulus (mod-N)</td>
<td>Number of unique states (e.g., mod-8 counts 0-7)</td>
</tr>
<tr>
<td>Direction</td>
<td>Up, down, or up-down (bidirectional)</td>
</tr>
<tr>
<td>Type</td>
<td>Binary, BCD, ring, Johnson, etc.</td>
</tr>
<tr>
<td>Synchronous/Async</td>
<td>All flip-flops clock together or in cascade</td>
</tr>
</tbody>
</table>
<h3 id="binary-counter">Binary Counter</h3>
<p>A <strong>Binary Counter</strong> counts in standard binary sequence. An n-bit binary counter has <span class="arithmatex">\(2^n\)</span> states and counts from 0 to <span class="arithmatex">\(2^n - 1\)</span> before wrapping around.</p>
<p>A 4-bit binary counter sequence:</p>
<table>
<thead>
<tr>
<th>Clock Cycle</th>
<th>Q₃</th>
<th>Q₂</th>
<th>Q₁</th>
<th>Q₀</th>
<th>Decimal</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>14</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>14</td>
</tr>
<tr>
<td>15</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>15</td>
</tr>
<tr>
<td>16</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0 (wrap)</td>
</tr>
</tbody>
</table>
<p>Notice how Q₀ toggles every clock cycle, Q₁ toggles every 2 cycles, Q₂ every 4 cycles, and Q₃ every 8 cycles. This is the natural binary counting pattern.</p>
<h3 id="up-counter">Up Counter</h3>
<p>An <strong>Up Counter</strong> increments its value by one on each clock pulse. Starting from 0, it counts upward: 0, 1, 2, 3, ... until it reaches its maximum value, then wraps back to 0.</p>
<p>The fundamental equation:</p>
<div class="arithmatex">\[Count^+ = Count + 1\]</div>
<p>With wraparound:</p>
<div class="arithmatex">\[Count^+ = (Count + 1) \mod 2^n\]</div>
<p>where n is the number of bits.</p>
<p>For a synchronous up counter, the design uses T flip-flops (or D flip-flops with XOR feedback):</p>
<ul>
<li><strong>Q₀</strong>: Toggle every clock cycle (T₀ = 1)</li>
<li><strong>Q₁</strong>: Toggle when Q₀ = 1 (T₁ = Q₀)</li>
<li><strong>Q₂</strong>: Toggle when Q₀Q₁ = 1 (T₂ = Q₀ · Q₁)</li>
<li><strong>Q₃</strong>: Toggle when Q₀Q₁Q₂ = 1 (T₃ = Q₀ · Q₁ · Q₂)</li>
</ul>
<p>The general pattern: bit i toggles when all lower bits are 1.</p>
<h3 id="down-counter">Down Counter</h3>
<p>A <strong>Down Counter</strong> decrements its value by one on each clock pulse. Starting from its maximum value, it counts downward: 15, 14, 13, ... 1, 0, then wraps to the maximum.</p>
<p>The fundamental equation:</p>
<div class="arithmatex">\[Count^+ = Count - 1\]</div>
<p>With wraparound:</p>
<div class="arithmatex">\[Count^+ = (Count - 1) \mod 2^n\]</div>
<p>For a down counter, the toggle conditions change:</p>
<ul>
<li><strong>Q₀</strong>: Toggle every clock (same as up counter)</li>
<li><strong>Q₁</strong>: Toggle when Q₀ = 0 (T₁ = Q̄₀)</li>
<li><strong>Q₂</strong>: Toggle when Q₀Q₁ = 0 (T₂ = Q̄₀ · Q̄₁)</li>
<li><strong>Q₃</strong>: Toggle when Q₀Q₁Q₂ = 0 (T₃ = Q̄₀ · Q̄₁ · Q̄₂)</li>
</ul>
<p>The pattern: bit i toggles when all lower bits are 0 (about to borrow).</p>
<h3 id="up-down-counter">Up-Down Counter</h3>
<p>An <strong>Up-Down Counter</strong> (also called a bidirectional counter) can count in either direction, controlled by a direction input (often called UP/DOWN or DIR).</p>
<table>
<thead>
<tr>
<th>DIR</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Count up on clock edge</td>
</tr>
<tr>
<td>0</td>
<td>Count down on clock edge</td>
</tr>
</tbody>
</table>
<p>The toggle logic combines both conditions:</p>
<div class="arithmatex">\[T_i = (DIR \cdot Q_0 \cdot Q_1 \cdots Q_{i-1}) + (\overline{DIR} \cdot \overline{Q_0} \cdot \overline{Q_1} \cdots \overline{Q_{i-1}})\]</div>
<p>This can be simplified using XOR:</p>
<div class="arithmatex">\[T_i = Q_0 \oplus \overline{DIR}) \cdot (Q_1 \oplus \overline{DIR}) \cdots (Q_{i-1} \oplus \overline{DIR})\]</div>
<div class="admonition note">
<p class="admonition-title">Direction Changes Mid-Count</p>
<p>An up-down counter can reverse direction at any time. If you're counting up: 3, 4, 5... and suddenly change direction, you'll count down: 5, 4, 3... This is useful for applications like position tracking where the direction of motion can reverse.</p>
</div>
<h4 id="diagram-up-down-counter">Diagram: Up-Down Counter</h4>
<iframe src="../../sims/up-down-counter/main.html" width="100%" height="500px" scrolling="no"></iframe>

<details>
<summary>Up-Down Counter Interactive</summary>
<p>Type: microsim</p>
<p>Bloom Level: Apply (L3)
Bloom Verb: Practice</p>
<p>Learning Objective: Students will be able to practice operating an up-down counter by changing direction and observing the count sequence, including boundary behavior when wrapping.</p>
<p>Instructional Rationale: Interactive control over direction with visible count sequence and wrap behavior demonstrates bidirectional counting dynamics.</p>
<p>Canvas Layout:</p>
<ul>
<li>Center: 4-bit counter display (binary and decimal)</li>
<li>Left: Direction control toggle (UP/DOWN)</li>
<li>Right: Count history showing sequence</li>
<li>Bottom: Clock control with enable</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Direction toggle switch</li>
<li>Clock step button</li>
<li>Auto-clock mode with speed control</li>
<li>Enable toggle to pause counting</li>
<li>Clear/Reset button</li>
<li>History panel showing last 16 values</li>
<li>Visual indicator of count direction</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Current count (binary and decimal)</li>
<li>Current direction</li>
<li>Next value preview</li>
<li>Count sequence history</li>
<li>Overflow/underflow indicators</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Binary display as row of bits</li>
<li>Decimal display prominently</li>
<li>Direction shown with arrow icon</li>
<li>Count history as scrolling list or graph</li>
<li>Wrap animation when reaching limits</li>
</ul>
<p>Implementation: p5.js with bidirectional counter simulation</p>
</details>
<h3 id="counter-state-diagram">Counter State Diagram</h3>
<p>A <strong>Counter State Diagram</strong> shows the sequence of states a counter passes through and the transitions between them. For a simple counter, this forms a cycle.</p>
<p>A 3-bit up counter state diagram:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>    ┌──────────────────────────────────────────┐
    │                                          │
    ▼                                          │
   000 ─────▶ 001 ─────▶ 010 ─────▶ 011       │
                                    │          │
                                    ▼          │
   111 ◀───── 110 ◀───── 101 ◀───── 100       │
    │                                          │
    └──────────────────────────────────────────┘
</code></pre></div></td></tr></table></div>
<p>Every state has exactly one successor (the next count value), and the diagram forms a closed loop—the counter cycles forever.</p>
<p>For an up-down counter, the state diagram shows transitions in both directions, but only one direction is active at any time based on the DIR signal.</p>
<h3 id="counter-overflow">Counter Overflow</h3>
<p><strong>Counter Overflow</strong> occurs when a counter reaches its maximum value and wraps around to zero (for up counters) or when it reaches zero and wraps to the maximum (for down counters).</p>
<p>Overflow is detected by:</p>
<ul>
<li><strong>Terminal count (TC)</strong>: Signal that goes high when counter reaches its maximum</li>
<li><strong>Ripple carry (RCO)</strong>: Carry output for cascading counters</li>
</ul>
<p>For a 4-bit up counter:</p>
<div class="arithmatex">\[TC = Q_3 \cdot Q_2 \cdot Q_1 \cdot Q_0\]</div>
<p>TC = 1 only when count = 1111 (15).</p>
<p>For a down counter:</p>
<div class="arithmatex">\[TC = \overline{Q_3} \cdot \overline{Q_2} \cdot \overline{Q_1} \cdot \overline{Q_0}\]</div>
<p>TC = 1 only when count = 0000 (0).</p>
<div class="admonition warning">
<p class="admonition-title">Overflow Handling</p>
<p>Counter overflow can be either a feature or a bug. For a free-running timer, you want it to wrap. For counting items in a buffer, overflow might indicate an error condition. Always consider what should happen when your counter maxes out!</p>
</div>
<p>Overflow detection enables:</p>
<ul>
<li><strong>Counter cascading</strong>: Chain multiple counters for wider range</li>
<li><strong>Event triggering</strong>: Signal when a specific count is reached</li>
<li><strong>Error detection</strong>: Flag when a counted quantity exceeds limits</li>
</ul>
<h3 id="mod-n-counter">Mod-N Counter</h3>
<p>A <strong>Mod-N Counter</strong> counts from 0 to N-1, then resets to 0—it cycles through exactly N states. The "modulus" is the number of states before repeating.</p>
<p>Special cases:</p>
<ul>
<li><strong>Mod-16</strong>: Standard 4-bit binary counter (cycles through 16 states)</li>
<li><strong>Mod-10</strong>: Decade counter (counts 0-9)</li>
<li><strong>Mod-60</strong>: Seconds or minutes counter (counts 0-59)</li>
<li><strong>Mod-24</strong>: Hours counter (counts 0-23)</li>
</ul>
<p>To create a mod-N counter from a larger binary counter, you need to force a reset when the count reaches N:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>           ┌─────────────────┐
           │    4-bit Up     │
CLK ───────┤    Counter      ├──── Q₃Q₂Q₁Q₀
           │                 │
   ┌───────┤ CLR             │
   │       └─────────────────┘
   │                │
   └────────────────┴──── When Q₃Q₂Q₁Q₀ = N, pulse CLR
</code></pre></div></td></tr></table></div>
<p>For example, a mod-12 counter using a 4-bit counter:</p>
<div class="arithmatex">\[CLR = Q_3 \cdot \overline{Q_2} \cdot Q_1 \cdot \overline{Q_0}\]</div>
<p>This detects 1100 (12) and resets the counter to 0000.</p>
<div class="admonition tip">
<p class="admonition-title">Glitch-Free Mod-N Design</p>
<p>The self-clearing method can cause a brief glitch (counter shows N for a tiny moment before resetting). For glitch-free operation, use synchronous design where the next-state logic directly computes the wraparound.</p>
</div>
<h3 id="bcd-counter-and-decade-counter">BCD Counter and Decade Counter</h3>
<p>A <strong>BCD Counter</strong> counts in Binary-Coded Decimal—each digit is represented by 4 bits, counting 0-9 only. This makes it easy to display counts in decimal.</p>
<p>A <strong>Decade Counter</strong> is a mod-10 counter that counts from 0 to 9, then resets. It's the building block for BCD counters.</p>
<p>Single decade counter sequence:</p>
<table>
<thead>
<tr>
<th>Clock</th>
<th>Q₃</th>
<th>Q₂</th>
<th>Q₁</th>
<th>Q₀</th>
<th>Decimal</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>2</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>9</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>9</td>
</tr>
<tr>
<td>10</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0 (wrap)</td>
</tr>
</tbody>
</table>
<p>BCD counters cascade to count larger numbers. For a 2-digit display (00-99), you chain two decade counters:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>CLK ─────┤ Units ├─────┤ Tens ├─────▶
          (0-9)   RCO   (0-9)   RCO
</code></pre></div></td></tr></table></div>
<p>When the units counter rolls over from 9 to 0, its ripple carry increments the tens counter.</p>
<h4 id="diagram-bcd-decade-counter">Diagram: BCD Decade Counter</h4>
<iframe src="../../sims/bcd-decade-counter/main.html" width="100%" height="500px" scrolling="no"></iframe>

<details>
<summary>BCD Decade Counter with Display</summary>
<p>Type: microsim</p>
<p>Bloom Level: Apply (L3)
Bloom Verb: Use</p>
<p>Learning Objective: Students will be able to use BCD decade counters to count in decimal, observing the 0-9 cycle and understanding how the count is displayed.</p>
<p>Instructional Rationale: Visual connection between BCD bits and decimal display reinforces understanding of binary-coded decimal representation.</p>
<p>Canvas Layout:</p>
<ul>
<li>Center: 4-bit BCD register with individual bits shown</li>
<li>Top: 7-segment display showing decimal digit</li>
<li>Left: Clock control</li>
<li>Right: Count history</li>
<li>Bottom: Binary to decimal conversion table</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Clock step button</li>
<li>Auto-count mode with speed control</li>
<li>Reset button</li>
<li>Visual 7-segment display</li>
<li>BCD bit indicators</li>
<li>Invalid state indicator (for &gt;9)</li>
<li>Cascaded mode showing two digits</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Current BCD value (4 bits)</li>
<li>Decimal digit displayed</li>
<li>Next value preview</li>
<li>Rollover indication when hitting 9</li>
<li>Count cycle position (0-9)</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Classic 7-segment display appearance</li>
<li>BCD bits as LED-style indicators</li>
<li>Rollover animation when 9→0</li>
<li>Clear visual grouping of bits and display</li>
<li>Color coding for active segments</li>
</ul>
<p>Implementation: p5.js with decade counter and 7-segment rendering</p>
</details>
<h3 id="ring-counter">Ring Counter</h3>
<p>A <strong>Ring Counter</strong> is a shift register with its output connected back to its input, forming a circular pattern. Only one bit is set to 1 at any time, and this 1 "rotates" around the register.</p>
<p>An 8-bit ring counter sequence:</p>
<table>
<thead>
<tr>
<th>Clock</th>
<th>Q₇</th>
<th>Q₆</th>
<th>Q₅</th>
<th>Q₄</th>
<th>Q₃</th>
<th>Q₂</th>
<th>Q₁</th>
<th>Q₀</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>6</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>8</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Ring counter characteristics:</p>
<ul>
<li><strong>N flip-flops for N states</strong>: Inefficient use of hardware</li>
<li><strong>One-hot encoding</strong>: Each state has exactly one bit set</li>
<li><strong>Simple decoding</strong>: State = which output is 1</li>
<li><strong>Needs initialization</strong>: Must set one bit to 1 at startup</li>
</ul>
<p>Ring counters are used for:</p>
<ul>
<li><strong>Stepper motor control</strong>: Activate one phase at a time</li>
<li><strong>Round-robin arbitration</strong>: Give each requestor a turn</li>
<li><strong>Timing generators</strong>: Create sequential timing pulses</li>
</ul>
<h3 id="johnson-counter">Johnson Counter</h3>
<p>A <strong>Johnson Counter</strong> (also called a twisted ring counter or Möbius counter) is a ring counter with the complement of the last bit fed back to the first bit. This doubles the number of states compared to a ring counter.</p>
<p>An 4-bit Johnson counter sequence:</p>
<table>
<thead>
<tr>
<th>Clock</th>
<th>Q₃</th>
<th>Q₂</th>
<th>Q₁</th>
<th>Q₀</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>5</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>6</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>7</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>8</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>Johnson counter characteristics:</p>
<ul>
<li><strong>N flip-flops give 2N states</strong>: Better than ring counter</li>
<li><strong>Adjacent states differ by one bit</strong>: Gray-code-like</li>
<li><strong>Unused states</strong>: N-bit Johnson uses 2N of 2^N possible states</li>
<li><strong>Simple feedback</strong>: Just invert the last output</li>
</ul>
<p>The 2N states cycle through a pattern where 1s "fill in" from left to right, then 0s "fill in" the same way.</p>
<h4 id="diagram-ring-vs-johnson-counter-comparison">Diagram: Ring vs Johnson Counter Comparison</h4>
<iframe src="../../sims/ring-johnson-counters/main.html" width="100%" height="550px" scrolling="no"></iframe>

<details>
<summary>Ring vs Johnson Counter Comparison</summary>
<p>Type: microsim</p>
<p>Bloom Level: Analyze (L4)
Bloom Verb: Compare</p>
<p>Learning Objective: Students will be able to compare ring and Johnson counters, explaining the difference in feedback mechanism, state sequences, and the number of states each provides for a given number of flip-flops.</p>
<p>Instructional Rationale: Side-by-side visualization of both counter types with the same number of flip-flops highlights the key differences in feedback and state utilization.</p>
<p>Canvas Layout:</p>
<ul>
<li>Left: 4-bit ring counter with state sequence</li>
<li>Right: 4-bit Johnson counter with state sequence</li>
<li>Bottom: Shared clock control</li>
<li>Center: State count comparison</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Synchronized or independent clock stepping</li>
<li>Clear/Reset to initial state</li>
<li>Visual highlighting of feedback connection</li>
<li>State sequence display (table or circular)</li>
<li>Unused state indicator for Johnson</li>
<li>Animation of bit flow</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Current state of both counters</li>
<li>Feedback bit (normal vs inverted)</li>
<li>Number of valid states (4 vs 8)</li>
<li>State position in cycle</li>
<li>State sequence history</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Registers shown as connected flip-flops</li>
<li>Feedback path prominently shown</li>
<li>Inverter visible in Johnson counter path</li>
<li>Current state highlighted</li>
<li>State sequence as circular diagram</li>
</ul>
<p>Implementation: p5.js with both counter simulations side by side</p>
</details>
<h2 id="register-files-organized-storage">Register Files: Organized Storage</h2>
<p>A <strong>Register File</strong> is a collection of registers organized as an addressable array. Instead of accessing registers individually by name, you specify a register number (address), and the register file provides access to that register's data.</p>
<p>Register files are essential components in CPUs, where they hold operands for ALU operations. A typical instruction like "ADD R1, R2, R3" means "add the contents of register 2 and register 3, store in register 1."</p>
<p>Register file structure:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code>         ┌─────────────────────────────────┐
Write    │                                 │
Data ────┤ Register 0 (R0)                 │
         │ Register 1 (R1)                 │
Read     │ Register 2 (R2)                 ├──── Read Data A
Addr A ──┤ Register 3 (R3)                 │
         │ ...                             ├──── Read Data B
Read     │ Register N-1                    │
Addr B ──┤                                 │
         │                                 │
Write ───┤ WE (Write Enable)               │
Addr ────┤                                 │
         └─────────────────────────────────┘
</code></pre></div></td></tr></table></div>
<p>Key features:</p>
<ul>
<li><strong>Multiple read ports</strong>: Often 2 reads per cycle for two operands</li>
<li><strong>One write port</strong>: Typically one register written per cycle</li>
<li><strong>Address decoding</strong>: Select which register to access</li>
<li><strong>Write enable</strong>: Control when writes actually happen</li>
</ul>
<p>A register file with 8 registers of 4 bits each:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Number of registers</td>
<td>8</td>
</tr>
<tr>
<td>Bits per register</td>
<td>4</td>
</tr>
<tr>
<td>Address width</td>
<td>3 bits (log₂8)</td>
</tr>
<tr>
<td>Read ports</td>
<td>2</td>
</tr>
<tr>
<td>Write ports</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>The address decoder selects which register to read or write:</p>
<table>
<thead>
<tr>
<th>Address</th>
<th>Register</th>
</tr>
</thead>
<tbody>
<tr>
<td>000</td>
<td>R0</td>
</tr>
<tr>
<td>001</td>
<td>R1</td>
</tr>
<tr>
<td>010</td>
<td>R2</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>111</td>
<td>R7</td>
</tr>
</tbody>
</table>
<h4 id="diagram-register-file">Diagram: Register File</h4>
<iframe src="../../sims/register-file/main.html" width="100%" height="550px" scrolling="no"></iframe>

<details>
<summary>Register File Interactive</summary>
<p>Type: microsim</p>
<p>Bloom Level: Apply (L3)
Bloom Verb: Use</p>
<p>Learning Objective: Students will be able to use a register file by reading from two addresses simultaneously and writing to a third, understanding how the address lines select which register is accessed.</p>
<p>Instructional Rationale: Interactive read/write operations with visible address decoding builds understanding of how register files work in processor datapaths.</p>
<p>Canvas Layout:</p>
<ul>
<li>Center: Array of 8 registers showing contents</li>
<li>Left: Read port A controls (address, output)</li>
<li>Right: Read port B controls (address, output)</li>
<li>Bottom: Write port controls (address, data, enable)</li>
<li>Top: Clock and operation status</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Read address A selector (0-7)</li>
<li>Read address B selector (0-7)</li>
<li>Write address selector (0-7)</li>
<li>Write data input</li>
<li>Write enable toggle</li>
<li>Clock step button</li>
<li>Read outputs displayed immediately</li>
<li>Write happens on clock edge</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>All register contents visible</li>
<li>Selected registers highlighted</li>
<li>Read values shown at ports</li>
<li>Pending write indication</li>
<li>Register address labels</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Registers as row of labeled boxes</li>
<li>Address selection as highlighting</li>
<li>Read paths shown as lines from register to output</li>
<li>Write path shown with data flowing to register</li>
<li>Decoder represented visually</li>
</ul>
<p>Implementation: p5.js with 8x4 register file simulation</p>
</details>
<h2 id="the-datapath-where-computation-happens">The Datapath: Where Computation Happens</h2>
<p>Now we arrive at the grand synthesis: the <strong>Datapath</strong>. The datapath is the part of a digital system that performs data processing operations—arithmetic, logic, shifting, and data movement. It's the "doing" part of the processor.</p>
<h3 id="datapath-concept">Datapath Concept</h3>
<p>A <strong>Datapath</strong> consists of:</p>
<ul>
<li><strong>Registers</strong>: Store operands and results</li>
<li><strong>Functional units</strong>: ALUs, shifters, multipliers that transform data</li>
<li><strong>Interconnects</strong>: Buses and multiplexers that route data between components</li>
<li><strong>Control points</strong>: Signals that select operations and data paths</li>
</ul>
<p>The datapath is directed by the <strong>Control Unit</strong>, which provides the signals telling the datapath what to do each clock cycle.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code>             ┌──────────────────────────────────────────────┐
             │                 DATAPATH                      │
             │                                               │
             │  ┌────────┐      ┌─────┐      ┌────────┐     │
             │  │Register│─────▶│     │─────▶│Register│     │
Control ────▶│  │ File   │      │ ALU │      │  (Dest)│     │
Signals      │  │        │─────▶│     │      │        │     │
             │  └────────┘      └─────┘      └────────┘     │
             │       ▲             ▲              │          │
             │       │             │              │          │
             │       └─────────────┴──────────────┘          │
             │              Result Feedback                  │
             └──────────────────────────────────────────────┘
</code></pre></div></td></tr></table></div>
<p>A simple datapath for executing R-type ALU instructions:</p>
<ol>
<li>Read two operands from register file</li>
<li>Pass operands through ALU</li>
<li>Write result back to register file</li>
</ol>
<p>All controlled by signals that specify which registers to read, what ALU operation to perform, and where to write the result.</p>
<h3 id="control-unit">Control Unit</h3>
<p>The <strong>Control Unit</strong> is the FSM that orchestrates the datapath. It generates the control signals that tell each datapath component what to do.</p>
<p>Control unit responsibilities:</p>
<ul>
<li><strong>Decode instructions</strong>: Interpret what operation is requested</li>
<li><strong>Sequence operations</strong>: Multi-cycle operations require multiple steps</li>
<li><strong>Generate control signals</strong>: Enable registers, select MUX inputs, specify ALU operation</li>
<li><strong>Handle special cases</strong>: Branches, exceptions, stalls</li>
</ul>
<p>The control unit is typically implemented as a finite state machine (as we learned in Chapter 9) or as a lookup table that maps instruction opcodes to control signals.</p>
<p>A simple control signal table:</p>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>RegWrite</th>
<th>ALUOp</th>
<th>MemRead</th>
<th>MemWrite</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADD</td>
<td>1</td>
<td>ADD</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>SUB</td>
<td>1</td>
<td>SUB</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>LOAD</td>
<td>1</td>
<td>ADD</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>STORE</td>
<td>0</td>
<td>ADD</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Each row defines the control signals for one instruction type.</p>
<div class="admonition tip">
<p class="admonition-title">Hardwired vs Microprogrammed Control</p>
<p>Control units come in two flavors:</p>
<ul>
<li><strong>Hardwired</strong>: Control logic is combinational logic—fast but inflexible</li>
<li><strong>Microprogrammed</strong>: Control signals stored in a ROM—slower but easily modified</li>
</ul>
<p>Modern RISC processors use hardwired control. Complex CISC processors often use microprogrammed control for their complex instructions.</p>
</div>
<h4 id="diagram-datapath-with-control-unit">Diagram: Datapath with Control Unit</h4>
<iframe src="../../sims/datapath-control/main.html" width="100%" height="600px" scrolling="no"></iframe>

<details>
<summary>Datapath with Control Unit Visualization</summary>
<p>Type: microsim</p>
<p>Bloom Level: Analyze (L4)
Bloom Verb: Examine</p>
<p>Learning Objective: Students will be able to examine how the control unit generates signals that direct data flow through the datapath, tracing the execution of simple operations through registers and functional units.</p>
<p>Instructional Rationale: Animated visualization of data movement through the datapath with highlighted control signals shows the connection between control and data operations.</p>
<p>Canvas Layout:</p>
<ul>
<li>Center: Simplified datapath (register file, ALU, multiplexers)</li>
<li>Top: Instruction input and decode</li>
<li>Right: Control signal panel showing active signals</li>
<li>Bottom: Clock control and execution trace</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Instruction selector (ADD, SUB, AND, OR, LOAD, STORE)</li>
<li>Register file contents display</li>
<li>Step through execution</li>
<li>Control signals highlighted as they activate</li>
<li>Data path highlighting showing active routes</li>
<li>Result displayed after execution</li>
<li>Multi-cycle instruction stepping</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Current instruction being executed</li>
<li>Active control signals (color-coded)</li>
<li>Data values on buses</li>
<li>Register contents before and after</li>
<li>ALU operation and result</li>
<li>Memory address and data (for LOAD/STORE)</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Block diagram style datapath</li>
<li>Control signals as labeled lines with active/inactive coloring</li>
<li>Data buses showing current values</li>
<li>Active paths highlighted</li>
<li>Control unit as separate FSM block</li>
<li>Animation of data movement</li>
</ul>
<p>Implementation: p5.js with simplified MIPS-style datapath simulation</p>
</details>
<h2 id="register-transfer-level-rtl">Register Transfer Level (RTL)</h2>
<h3 id="what-is-rtl">What is RTL?</h3>
<p><strong>Register Transfer Level</strong> (RTL) is an abstraction that describes digital circuits in terms of:</p>
<ul>
<li><strong>Registers</strong>: Storage elements that hold data</li>
<li><strong>Transfers</strong>: Movement of data between registers</li>
<li><strong>Operations</strong>: Transformations applied during transfer</li>
</ul>
<p>RTL is the primary abstraction used in hardware description languages like Verilog and VHDL. When you write synthesizable Verilog, you're writing at the RTL level.</p>
<p>RTL abstracts away:</p>
<ul>
<li>Specific gate implementations</li>
<li>Transistor-level details</li>
<li>Physical placement and routing</li>
</ul>
<p>RTL specifies:</p>
<ul>
<li>What registers exist</li>
<li>When data transfers occur</li>
<li>What operations are performed</li>
</ul>
<p>Example RTL operations:</p>
<table>
<thead>
<tr>
<th>RTL Expression</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>R1 ← R2</td>
<td>Copy contents of R2 to R1</td>
</tr>
<tr>
<td>R1 ← R2 + R3</td>
<td>Add R2 and R3, store in R1</td>
</tr>
<tr>
<td>R1 ← R1 &lt;&lt; 1</td>
<td>Shift R1 left by 1 bit</td>
</tr>
<tr>
<td>R1 ← M[R2]</td>
<td>Load memory at address R2 into R1</td>
</tr>
</tbody>
</table>
<h3 id="rtl-notation">RTL Notation</h3>
<p><strong>RTL Notation</strong> provides a standardized way to express register transfers:</p>
<ul>
<li><strong>Register names</strong>: R0, R1, ACC, PC, MAR, etc.</li>
<li><strong>Transfer operator</strong>: ← (arrow pointing to destination)</li>
<li><strong>Conditional transfers</strong>: condition: R1 ← R2</li>
<li><strong>Parallel transfers</strong>: Separate with commas</li>
<li><strong>Timing</strong>: Transfers in one line happen simultaneously</li>
</ul>
<p>Basic RTL notation examples:</p>
<p><strong>Unconditional transfer:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>R1 ← R2
</code></pre></div></td></tr></table></div>
Copy R2's contents to R1 on the next clock edge.</p>
<p><strong>Conditional transfer:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Load: R1 ← M[MAR]
</code></pre></div></td></tr></table></div>
If Load signal is active, load memory contents at address MAR into R1.</p>
<p><strong>Transfer with operation:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>R1 ← R1 + R2
</code></pre></div></td></tr></table></div>
Add R1 and R2, store result in R1.</p>
<p><strong>Parallel transfers:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>R1 ← R2, R2 ← R1
</code></pre></div></td></tr></table></div>
Swap R1 and R2 (both transfers happen simultaneously on the same clock edge).</p>
<p><strong>Compound operations:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>T1: MAR ← PC
T2: MBR ← M[MAR], PC ← PC + 1
T3: IR ← MBR
</code></pre></div></td></tr></table></div>
Three-step instruction fetch sequence, one step per clock cycle.</p>
<div class="admonition note">
<p class="admonition-title">RTL vs Verilog</p>
<p>RTL notation is more abstract than Verilog. RTL says "what" without saying "how." Verilog is RTL notation with syntax strict enough that tools can synthesize hardware from it.</p>
<p>RTL: <code>R1 ← R2 + R3</code>
Verilog: <code>always @(posedge clk) R1 &lt;= R2 + R3;</code></p>
</div>
<h4 id="diagram-rtl-operations-visualizer">Diagram: RTL Operations Visualizer</h4>
<iframe src="../../sims/rtl-operations/main.html" width="100%" height="550px" scrolling="no"></iframe>

<details>
<summary>RTL Operations Interactive</summary>
<p>Type: microsim</p>
<p>Bloom Level: Apply (L3)
Bloom Verb: Execute</p>
<p>Learning Objective: Students will be able to execute RTL operations step by step, predicting register contents after each transfer and understanding the difference between sequential and parallel transfers.</p>
<p>Instructional Rationale: Step-through execution of RTL statements with visible register state changes makes the abstract notation concrete.</p>
<p>Canvas Layout:</p>
<ul>
<li>Left: RTL statement sequence</li>
<li>Center: Register bank showing current values</li>
<li>Right: Transfer animation area</li>
<li>Bottom: Clock control and execution trace</li>
</ul>
<p>Interactive Elements:</p>
<ul>
<li>Select from predefined RTL sequences</li>
<li>Step through transfers one at a time</li>
<li>Highlight source and destination registers</li>
<li>Show data flow animation</li>
<li>Parallel transfer indicator</li>
<li>Reset registers</li>
<li>Edit register initial values</li>
</ul>
<p>Data Visibility:</p>
<ul>
<li>Current RTL statement highlighted</li>
<li>Source register(s) and values</li>
<li>Operation being performed</li>
<li>Destination register</li>
<li>Before/after register values</li>
<li>Transfer type (conditional, parallel, etc.)</li>
</ul>
<p>Visual Style:</p>
<ul>
<li>Registers as labeled boxes with values</li>
<li>Data flow as animated arrows</li>
<li>Source highlighted in blue</li>
<li>Destination highlighted in green</li>
<li>Operation symbol shown on path</li>
<li>Parallel transfers shown simultaneously</li>
</ul>
<p>Implementation: p5.js with RTL interpreter and register visualization</p>
</details>
<h3 id="rtl-design-flow">RTL Design Flow</h3>
<p>RTL is the starting point for hardware implementation:</p>
<ol>
<li><strong>Specification</strong>: Define required behavior in words</li>
<li><strong>RTL description</strong>: Express as register transfers</li>
<li><strong>HDL coding</strong>: Translate RTL to Verilog/VHDL</li>
<li><strong>Synthesis</strong>: Convert HDL to gate-level netlist</li>
<li><strong>Implementation</strong>: Map to FPGA or fabricate as ASIC</li>
</ol>
<p>This flow allows designers to think at a higher level of abstraction while still producing actual hardware.</p>
<h2 id="putting-it-all-together-a-simple-cpu-datapath">Putting It All Together: A Simple CPU Datapath</h2>
<p>Let's see how registers, counters, and datapath concepts combine in a simple CPU:</p>
<p><strong>Components:</strong></p>
<ul>
<li><strong>PC (Program Counter)</strong>: Register that holds the address of the next instruction</li>
<li><strong>IR (Instruction Register)</strong>: Register that holds the current instruction</li>
<li><strong>Register File</strong>: Holds operands and results</li>
<li><strong>ALU</strong>: Performs arithmetic and logic operations</li>
<li><strong>Control Unit</strong>: FSM that sequences operations</li>
</ul>
<p><strong>Simplified fetch-execute cycle in RTL:</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>// Fetch
T0: MAR ← PC
T1: IR ← M[MAR], PC ← PC + 1

// Decode (combinational, control unit interprets IR)

// Execute (example: ADD R1, R2, R3)
T2: A ← R[IR.rs1], B ← R[IR.rs2]
T3: R[IR.rd] ← A + B
</code></pre></div></td></tr></table></div>
<p>This simple sequence shows:</p>
<ul>
<li><strong>Register transfers</strong>: PC to MAR, memory to IR</li>
<li><strong>Counter increment</strong>: PC ← PC + 1</li>
<li><strong>Parallel operations</strong>: Fetch and increment happen together</li>
<li><strong>Datapath routing</strong>: Register file to ALU to register file</li>
</ul>
<p>The control unit is an FSM that cycles through T0, T1, T2, T3 states, generating the appropriate control signals at each step.</p>
<h2 id="summary-and-key-takeaways">Summary and Key Takeaways</h2>
<p>Congratulations! You've now mastered the building blocks that turn flip-flops into functional computer components. Let's review what you've learned:</p>
<p><strong>Registers:</strong></p>
<ul>
<li>Groups of flip-flops storing multi-bit words</li>
<li>Control signals: Enable, Load, Clear</li>
<li>Parallel load for simultaneous data capture</li>
</ul>
<p><strong>Shift Registers:</strong></p>
<ul>
<li>SISO, SIPO, PISO, PIPO configurations</li>
<li>Serial-to-parallel and parallel-to-serial conversion</li>
<li>Bidirectional shift for left/right movement</li>
<li>Universal shift register does it all</li>
</ul>
<p><strong>Counters:</strong></p>
<ul>
<li>Up, down, and up-down counting</li>
<li>Binary counters for standard sequences</li>
<li>Mod-N counters for custom modulus</li>
<li>BCD/decade counters for decimal display</li>
<li>Ring and Johnson counters for special sequences</li>
<li>Overflow/terminal count detection</li>
</ul>
<p><strong>Datapath:</strong></p>
<ul>
<li>Registers + functional units + interconnects</li>
<li>Controlled by the control unit FSM</li>
<li>RTL describes register-to-register operations</li>
</ul>
<p><strong>Register File:</strong></p>
<ul>
<li>Addressable array of registers</li>
<li>Multiple read ports, typically one write port</li>
<li>Foundation of processor register storage</li>
</ul>
<p><strong>RTL Abstraction:</strong></p>
<ul>
<li>Describes circuits as register transfers</li>
<li>Foundation for HDL coding and synthesis</li>
<li>Bridges behavior and implementation</li>
</ul>
<div class="admonition success">
<p class="admonition-title">The Big Picture</p>
<p>You now understand how simple flip-flops combine into registers that store data, counters that track sequences, and datapaths that process information. These are the building blocks inside every CPU, GPU, and digital system. When you hear "the processor fetched the instruction and incremented the program counter," you know exactly what's happening at the register transfer level!</p>
</div>
<details>
<summary>Graphic Novel Suggestion</summary>
<p>An engaging graphic novel could follow the journey of a single byte of data as it travels through a computer system—from keyboard press to register to memory and back. The narrative could personify the registers as patient librarians, the counters as diligent timekeepers, and the control unit as the orchestra conductor coordinating everything. Key historical figures like Maurice Wilkes (who pioneered microprogramming) and John von Neumann (whose architecture defined the stored-program computer) could appear as mentors explaining why these abstractions matter. The climax could show the first successful execution of a simple program, with all the datapath components working in harmony.</p>
</details>
<h2 id="practice-problems">Practice Problems</h2>
<p>Test your understanding with these exercises:</p>
<details class="question">
<summary>Problem 1: Shift Register Type</summary>
<p>A communication receiver needs to accept data one bit at a time from a serial line, then process all 8 bits at once when a complete byte has arrived. Which type of shift register should be used?</p>
<p><strong>Solution:</strong>
This requires a <strong>Serial In Parallel Out (SIPO)</strong> shift register. Data enters serially (one bit per clock), and after 8 clock cycles, all 8 bits are available at the parallel outputs for processing.</p>
</details>
<details class="question">
<summary>Problem 2: Counter Modulus</summary>
<p>Design a counter that counts 0, 1, 2, 3, 4, 5, 0, 1, 2, 3, 4, 5, ... (mod-6). How many flip-flops are needed, and what value triggers the reset?</p>
<p><strong>Solution:</strong>
A mod-6 counter needs 3 flip-flops (since <span class="arithmatex">\(2^2 = 4 &lt; 6 \leq 8 = 2^3\)</span>).</p>
<p>The counter counts 000 → 001 → 010 → 011 → 100 → 101 → 000...</p>
<p>Reset is triggered when the count reaches 110 (6 in binary):</p>
<div class="arithmatex">\[RESET = Q_2 \cdot Q_1 \cdot \overline{Q_0}\]</div>
<p>Wait—that's 110 which is 6. But we want to reset <em>before</em> displaying 6. Using synchronous design, when the count is 101 (5), the next state should be 000 instead of 110.</p>
</details>
<details class="question">
<summary>Problem 3: Ring vs Johnson States</summary>
<p>Compare the number of states in a 5-bit ring counter versus a 5-bit Johnson counter.</p>
<p><strong>Solution:</strong>
- <strong>5-bit Ring Counter</strong>: 5 states (the single 1 rotates through 5 positions)
- <strong>5-bit Johnson Counter</strong>: 10 states (2N = 2 × 5)</p>
<p>The Johnson counter gets twice as many states from the same hardware because it fills with 1s then fills with 0s, creating 2N distinct patterns.</p>
</details>
<details class="question">
<summary>Problem 4: RTL Expression</summary>
<p>Write the RTL expression for swapping the contents of registers R1 and R2 without using a temporary register.</p>
<p><strong>Solution:</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>R1 ← R2, R2 ← R1
</code></pre></div></td></tr></table></div></p>
<p>In RTL, transfers listed on the same line (separated by commas) happen simultaneously on the same clock edge. Both R1 and R2 are read before either is written, enabling the swap without a temporary.</p>
</details>
<details class="question">
<summary>Problem 5: Universal Shift Register Mode</summary>
<p>A 4-bit universal shift register contains 1010. The mode is set to "shift left" and the left serial input is 1. What is the register contents after one clock cycle?</p>
<p><strong>Solution:</strong>
Shift left: Each bit moves to a higher position, and the serial input enters at the LSB.</p>
<p>Before: 1010
After: 0101 (the leftmost 1 shifts out, new 1 enters from right)</p>
<p>Wait, let me reconsider. Shift left means:
- Q3 ← Q2 (1 ← 0)
- Q2 ← Q1 (0 ← 1)
- Q1 ← Q0 (1 ← 0)
- Q0 ← Serial_Left (0 ← 1)</p>
<p>Result: <strong>0101</strong></p>
</details>
<details class="question">
<summary>Problem 6: Register File Access</summary>
<p>A register file has 16 registers and 2 read ports. How many address bits are needed for each read port? If a processor instruction specifies two source registers and one destination register, how many register address bits are in the instruction format?</p>
<p><strong>Solution:</strong>
- Each port needs <span class="arithmatex">\(\log_2 16 = 4\)</span> address bits
- Total register address bits in instruction: 4 + 4 + 4 = <strong>12 bits</strong> (2 source addresses + 1 destination address)</p>
<p>This is why RISC processors with 32 registers need 5-bit register fields, and instructions that specify 3 registers use 15 bits just for register addressing!</p>
</details>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../10-fsm-design-applications/quiz/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Quiz">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Quiz
              </div>
            </div>
          </a>
        
        
          
          <a href="quiz/" class="md-footer__link md-footer__link--next" aria-label="Next: Quiz">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Quiz
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.expand", "navigation.path", "navigation.prune", "navigation.indexes", "toc.follow", "navigation.top", "navigation.footer"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../js/extra.js"></script>
      
        <script src="../../js/katex.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>